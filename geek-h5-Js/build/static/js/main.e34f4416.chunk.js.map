{"version":3,"sources":["components/KeepAlive/index.module.scss","components/NavBar/index.module.scss","components/NoneComment/index.module.scss","components/Sticky/index.module.scss","pages/Article/components/CommentFooter/index.module.scss","pages/Article/components/CommentInput/index.module.scss","pages/Article/components/CommentItem/index.module.scss","pages/Article/components/Reply/index.module.scss","pages/Article/components/Share/index.module.scss","pages/Article/index.module.scss","components/Tabs/index.module.scss","components/Image/index.module.scss","components/ArticleItem/index.module.scss","pages/Home/components/ArticleList/index.module.scss","pages/Home/components/Channels/index.module.scss","pages/Home/index.module.scss","pages/Profile/index.module.scss","pages/Question/index.module.scss","pages/Video/index.module.scss","pages/Layout/index.module.scss","components/Input/index.module.scss","pages/Login/index.module.scss","pages/Profile/Chat/index.module.scss","components/Textarea/index.module.scss","pages/Profile/Edit/components/EditInput/index.module.scss","pages/Profile/Edit/components/EditList/index.module.scss","pages/Profile/Edit/index.module.scss","pages/Profile/Feedback/index.module.scss","pages/Search/index.module.scss","pages/Search/Result/index.module.scss","utils/history.js","utils/token.js","utils/http.js","components/AuthRoute/index.js","components/KeepAlive/index.js","components/Icon/index.js","components/NavBar/index.js","assets/none.png","components/NoneComment/index.js","components/Sticky/index.js","store/actions/article.js","store/actions/home.js","store/actions/login.js","store/actions/profile.js","pages/Article/components/CommentFooter/index.js","pages/Article/components/CommentInput/index.js","pages/Article/components/CommentItem/index.js","pages/Article/components/Reply/index.js","pages/Article/components/Share/index.js","pages/Article/index.js","components/Tabs/index.js","components/Image/index.js","components/ArticleItem/index.js","pages/Home/components/ArticleList/index.js","pages/Home/components/Channels/index.js","pages/Home/components/MoreAction/index.js","pages/Home/index.js","pages/Profile/index.js","pages/Question/index.js","pages/Video/index.js","pages/Layout/index.js","components/Input/index.js","pages/Login/index.js","pages/NotFound/index.js","pages/Profile/Chat/index.js","components/Textarea/index.js","pages/Profile/Edit/components/EditInput/index.js","pages/Profile/Edit/components/EditList/index.js","pages/Profile/Edit/index.js","pages/Profile/Feedback/index.js","pages/Search/index.js","store/actions/search.js","pages/Search/Result/index.js","App.js","store/reducers/article.js","store/reducers/home.js","store/reducers/login.js","store/reducers/profile.js","store/reducers/search.js","store/reducers/index.js","store/index.js","index.js"],"names":["module","exports","history","createBrowserHistory","KEY","getTokens","JSON","parse","localStorage","getItem","setTokens","tokens","setItem","stringify","removeTokens","removeItem","isAuth","token","http","axios","create","baseURL","interceptors","request","use","config","headers","error","Promise","reject","response","a","console","log","status","refresh_token","replace","from","location","pathname","put","res","data","push","info","AuthRoute","Component","component","rest","render","props","to","state","KeepAlive","alivePath","children","isMatch","startsWith","className","styles","root","style","display","Icon","type","onClick","classnames","xlinkHref","NavBar","rightContent","onLeftClick","NoneComment","src","noComment","alt","Sticky","height","offset","placeholderRef","useRef","containerRef","useEffect","placeholderDOM","current","containerDOM","onScroll","throttle","getBoundingClientRect","top","position","addEventListener","removeEventListener","ref","setInfo","partialInfo","payload","setComment","partial","deleteLiking","id","dispatch","getState","article","delete","attitude","like_count","updateLiking","post","target","deleteCollection","is_collected","updateCollection","deleteFollow","is_followed","message","updateFollow","deleteCommentLiking","results","comment","map","item","com_id","is_liking","updateCommentLiking","getUser","channels","getRecommend","deleteChannel","isLogin","home","channelsList","recommendChannel","newChannels","sort","b","addChannel","patch","filter","setMoreAction","visible","sendSms","mobile","get","login","values","updateUserProfile","name","value","updateProfile","CommentFooter","comm_count","placeholder","onComment","onLike","onCollected","onShare","onShowComment","CommentInput","onClose","art_id","useState","setValue","txtRef","setTimeout","focus","onSendComment","trim","content","new_obj","rows","onChange","e","CommentItem","aut_photo","aut_name","reply_count","pubdate","onThumbsUp","onOpenReply","thumbsUp","replyJSX","dayjs","Reply","commentOpen","setCommentOpen","params","source","loadData","onCloseComment","total_count","length","minHeight","document","documentElement","clientHeight","sidebar","open","onOpenChange","Share","Article","useDispatch","useSelector","isArticleLoading","isLoading","articleDetail","articleComment","isCommentLoading","replyOpen","setReplyOpen","shareOpen","setShareOpen","showNavAuthor","setShowNavAuthor","authorRef","wrapperRef","commentRef","listRootRef","listPlaceholderRef","useParams","useHistory","finished","handleScroll","container","isFinished","stop","loading","setLoading","setFinished","useMemo","scrollBottom","bottom","useScroll","useCallback","getMoreComment","last_id","end_id","articleInfo","getArticleInfo","getCommentList","dgHtml","querySelector","codes","querySelectorAll","hljs","configure","ignoreUnescapedHTML","forEach","block","highlightElement","pre","wrapperDOM","onCloseReply","onFollow","aut_id","read_count","title","date","format","go","classNames","speed","width","viewBox","backgroundColor","foregroundColor","x","y","rx","ry","cx","cy","r","dangerouslySetInnerHTML","__html","DOMPurify","sanitize","scrollTop","offsetTop","Tabs","index","tabs","navRef","lineRef","activeIndex","setActiveIndex","activeTab","activeTabWidth","offsetWidth","activeOffsetLeft","offsetLeft","scrollLeft","frames","Math","round","count","animate","requestAnimationFrame","transform","window","innerWidth","i","changeTab","React","Children","child","cloneElement","activeId","Image","memo","isError","setIsError","setIsLoading","imgRef","onLoad","onError","imageObserver","IntersectionObserver","entries","imgObserver","entry","isIntersecting","lazyImage","dataset","observe","disconnect","locale","extend","relativeTime","ArticleItem","images","onFeedback","stopPropagation","Row","setSize","rowRef","list","scrollHeight","cover","articleItemProps","hasMore","areEqual","ArticleList","channelId","listRef","sizeMap","size","resetAfterIndex","getSize","refreshing","setRefreshing","preTimestamp","Date","articles","setArticles","setHasMore","channel_id","timestamp","pre_timestamp","loadMoreItems","startIndex","stopIndex","resolve","onPullToRefresh","itemCount","damping","onRefresh","isItemLoaded","onItemsRendered","innerHeight","itemSize","itemData","Channels","userChannles","tabActiveIndex","onChannelClick","isEdit","setIsEdit","differenceBy","getRecommendChannel","onDeleteChannel","newTabs","onAddChannel","onChannelItemClick","MoreAction","moreAction","feedbackType","setFeedbackType","footer","transparent","maskClosable","CHANNEL_KEY","Home","userChannel","setTabActiveIndex","setOpen","localTabs","Profile","profile","user","art_count","fans_count","follow_count","photo","Question","Video","setlist","onSend","age","uname","menus","icon","Layout","useLocation","exact","path","isSelected","Input","autoFocus","extra","onExtraClick","inputRef","Login","time","setTime","formik","useFormik","initialValues","code","validationSchema","Yup","shape","required","matches","onSubmit","onSendSms","timeId","setInterval","clearInterval","errors","touched","isValid","handleChange","handleSubmit","maxLength","disabled","NotFound","leftSecond","setLeftSecond","timerRef","Chat","msg","setList","socketIO","chatListRef","socketio","io","query","transports","on","close","offsetHeight","onKeyDown","keyCode","emit","now","Textarea","setCount","textRef","setSelectionRange","EditInput","onCommit","onValueChange","EditList","Item","alert","ProfileEdit","userInfo","userProfile","fileRef","openInput","setOpenInput","openList","setOpenList","onCloseOpenInput","onCloseOpenList","openListConfig","click","openInputConfig","intro","arrow","gender","mode","birthday","minDate","maxDate","getFullYear","getMonth","getDate","hidden","avatar","files","formData","FormData","append","updateAvatar","success","text","color","onPress","FeedBack","multiple","Search","suggestList","search","suggest","searchValue","setSearchValue","isSearching","setIsSearching","showSuggest","debounce","q","options","suggestionList","split","onGoToDetail","Result","searchList","URLSearchParams","getSearchList","onToAritcleDetail","App","SearchResult","ProfileFeedback","initialState","rootReducer","combineReducers","action","commentPartial","middlewares","applyMiddleware","thunk","composeWithDevTools","composeEnhancers","preloadedState","store","createStore","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.e34f4416.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"KeepAlive_root__XqfEA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NavBar_root__1gfK2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"NoneComment_root__Tr6-n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Sticky_root__30Uo5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"CommentFooter_root___5EgH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"CommentInput_root__30D1U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"CommentItem_root__3ffnw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Reply_root__F6Tz4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Share_root__30JWq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Article_root__2-Guj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Tabs_root__2owfQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Image_root__23roE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ArticleItem_root__24aRX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ArticleList_root__1Qkbr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Channels_root__irry3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Home_root__3CAoe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Profile_root__23ovY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Question_root__1lwN5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Video_root__1OCev\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Layout_root__l_Jmh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Input_root__3V7li\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Login_root__2HI_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Chat_root__1p9t7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Textarea_root__3XthM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"EditInput_root__3foqi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"EditList_root__2DDcg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Edit_root__1ShB3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Feedback_root__QW25D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Search_root__3U138\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Result_root__H3kA8\"};","import { createBrowserHistory } from 'history'\n\nexport const history = createBrowserHistory()\n","const KEY = 'geek-itcast'\n\nexport const getTokens = () => JSON.parse(localStorage.getItem(KEY)) || {}\n\nexport const setTokens = tokens => localStorage.setItem(KEY, JSON.stringify(tokens))\n\nexport const removeTokens = () => localStorage.removeItem(KEY)\n\nexport const isAuth = () => !!getTokens().token    \n\n\n\n//双 !!  把任意类型的值转换为布尔值 \n// 单 !  表示取反","import { Toast } from 'antd-mobile'\nimport axios from 'axios'\nimport { history } from './history'\nimport { getTokens, removeTokens, setTokens } from './token'\n\nconst http = axios.create({\n  baseURL: 'http://toutiao.itheima.net/v1_0'   // baseURL: 'http://geek.itheima.net/v1_0'\n})\n\n// 配置请求, 响应拦截器\n// 请求拦截器\nhttp.interceptors.request.use(config => {//->成功的函数config, 错误信息\n  // console.log(config)///--------->   {url: '/user/channels', method: 'get', headers: {…}, baseURL: 'http://toutiao.itheima.net/v1_0',  …}\n  // if (config.method === 'post') { config.headers['Content-Type'] = 'application/json' }\n  config.headers['Authorization'] = `Bearer ${getTokens().token}`\n  // config.headers.Authorization = 'Bearer'+token\n  return config\n},(error) => { return Promise.reject(error) } )\n\n\n// 响应拦截器\nhttp.interceptors.response.use(response => {\n  // console.log(response)///--------->   {data: {data: {…}, message: 'OK'}, config: {…请求的参数}, status: 200, statusText: 'OK', headers: {…},  …}\n  // debugger;\n  return response\n\n}, async error => {//如果有错误, 返回Promise\n  // 错误问题汇总==>\n  // 如果没有response\n  // 如果有response 但是状态码不为401\n  // 如果有response 但是状态码不为401 但是没有刷新token (跳到登录页 重新登录)\n  // 是401错误， 且有刷新token， 刷新token\n  // 尝试发请求， 获取新的token\n\n  console.log('error', error.response)\n \n\n  // 网络没有问题 后台返回了有数据\n   if (error.response.status === 401) {\n    const { token, refresh_token } = getTokens()\n    // debugger;\n\n      if (!token || !refresh_token) { //表示没有token或者没有refresh_token\n        history.replace('/login', {\n          from: history.location.pathname || '/home'\n        })\n        return Promise.reject(error)\n      }\n\n        try {\n          // 自动刷新 token\n          const res = await http.put('/authorizations', null, {\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded',\n              'Authorization': `Bearer ${refresh_token}`\n            }\n          })\n          console.log('自动刷新token iS', res)\n\n          // 把新的 token 保存起来   1.保存到redux中 & 保存到localstorage中\n          setTokens({\n            refresh_token,  //---- refresh_token ==== refresh_token: refresh_token\n            token: res.data.data.token   //---原生的 axios 发的请求  两层data\n          })\n\n          // 继续发送刚才错误的请求      <无感刷新token  token刷新成功后，重新把最开始的失败的请求重新发一次 >\n          return http(error.config)//返回 AxiosPromise  return\n          // http要的数据为：  http({url:'', data: { } }})   config就是一个对象\n\n          \n        } catch (error) {\n          // 失败，说明 refresh_token 失效了\n          console.log(error.response)\n          console.log(history.location.pathname)\n\n          removeTokens()\n          history.push('/login', {\n            from: history.location.pathname || '/home'\n          })\n          Toast.info('登录信息失效！ 请重新登录', 1)\n          return Promise.reject(error)\n        }\n  }\n\n  return Promise.reject(error)\n})\n\nexport { http }\n","import { isAuth } from '@/utils'\nimport { Redirect, Route,  } from 'react-router-dom'\n\n// https://reactrouter.com/web/example/auth-workflow\n// https://stackoverflow.com/a/64307442/15443637\n\n\n/**\n * AuthRoute: 访问个人中心时, 判断有没有token 如果有token就正常访问 否则就会被拦截到 登录页\n */\nconst AuthRoute = ({ component: Component, ...rest }) => {   /// 父组件中传递的属性为 component & path\n  // const loc = useLocation()\n  return (\n    <Route\n      {...rest}  //表示 如果传 exact 等一些属性\n      render={props => {\n        // console.log(props)\n        // isAuth    返回值为: () => !!getTokens().token\n        // isAuth()  取反返回的是: false \n        // 如果 !isAuth()为false  那么就是已经有token了(可以正常访问组件)  ||  如果 !isAuth()为true  那么就重定向到登录页面\n        if (!isAuth()) {   \n          return (\n            <Redirect to={\n              {\n                pathname: '/login',\n                state: {\n                  from: props.location.pathname \n                }\n              }\n            } />\n          )\n        }else{\n          return <Component {...props} />   /**组件首字母大写  解构 大写 */ \n        }\n      }}\n    />\n  )\n}\n\nexport { AuthRoute }\n","import { Route } from 'react-router-dom'\n\nimport styles from './index.module.scss'\n\n\nconst KeepAlive = ({ alivePath, component: Component, ...rest }) => {\n\n  return (\n    // 两个参数：  第一个参数: ...rest     第二个参数: children\n    <Route\n      {...rest}\n      children={props => {\n        // console.log(props)\n        const {  location: { pathname }  } = props\n        const isMatch = pathname === alivePath || pathname.startsWith(alivePath)\n        // console.log(isMatch)\n\n        return (\n          <div\n            className={styles.root}\n            style={{ display: isMatch ? 'block' : 'none' }}\n          >\n            <Component {...props} />\n          </div>\n        )\n      }}\n    />\n  )\n}\n\nexport { KeepAlive }\n","import classnames from 'classnames'\nimport PropTypes from 'prop-types'\n\n// 如果不传属性 返回默认属性 参考下面结构   返回结构return的部分\nconst Icon = ({ type, className, onClick }) => { //287-如果参数太多  ...rest 将rest写入到 svg中即可\n  return (\n    <svg\n      className={classnames('icon', className)}  \n      onClick={onClick}\n      aria-hidden=\"true\"\n    >\n      <use xlinkHref={`#${type}`}></use>\n    </svg> \n  )\n}\n\nIcon.propTypes = {\n  type: PropTypes.string.isRequired\n}\n\nexport default Icon\n\n\n// 原模板 xlinkHref的类名不同\n  /* \n      <div className=\"tabbar-item\">\n        <svg className=\"icon\" aria-hidden=\"true\">\n          <use xlinkHref=\"#iconbtn_qa\"></use>\n        </svg>\n        <span>回答</span>\n      </div>\n      <div className=\"tabbar-item\">\n        <svg className=\"icon\" aria-hidden=\"true\">\n          <use xlinkHref=\"#iconbtn_video\"></use>\n        </svg>\n        <span>视频</span>\n      </div>\n      <div className=\"tabbar-item\">\n        <svg className=\"icon\" aria-hidden=\"true\">\n          <use xlinkHref=\"#iconbtn_mine\"></use>\n        </svg>\n        <span>我的</span>\n      </div> \n  */","import classnames from 'classnames'\nimport styles from './index.module.scss'\n\n/* 导航栏功能为: 左：后退按钮，  中：标题，  右：右侧内容 */\n// import { withRouter} from 'react-router-dom'\n// 1.withRouter的使用\n// history, match, location  这个组件必须通过路由去配置的 <Route></Route>\n// 自己渲染的组件, 无法获取到路由信息 <NarBar></NavBar>\n\n// 2.路由提供了几个和路由相关的hook\n// useHistory, useLocation, useParams\n\nconst NavBar = ({ children, className, rightContent, onLeftClick }) => {\n  // NavBar：如果传入calssName 类名会为left,title,right   scss中有类名的引用\n  return (\n    <div className={classnames(styles.root, className)}>\n      <div className=\"left\" onClick={onLeftClick}>\n        <svg className=\"icon\" aria-hidden=\"true\">\n          <use xlinkHref=\"#iconfanhui\"></use>\n        </svg>\n      </div>\n      <div className=\"title\">{children}</div>\n      <div className=\"right\">{rightContent}</div>\n    </div>\n  )\n}\n\nexport default NavBar\n","export default __webpack_public_path__ + \"static/media/none.78b85fdc.png\";","import styles from './index.module.scss'\n\nimport noComment from '@/assets/none.png'\n\nconst NoneComment = () => {\n  return (\n    <div className={styles.root}>\n      <img src={noComment} alt=\"\" />\n      <p className=\"no-comment\">还没有人评论哦</p>\n    </div>\n  )\n}\n\nexport default NoneComment\n","import { useRef, useEffect } from 'react'\nimport throttle from 'lodash/fp/throttle'\n\nimport styles from './index.module.scss'\n\n\n\n\n\nconst Sticky = ({ root, height, offset = 0, children }) => {\n  const placeholderRef = useRef(null)\n  const containerRef = useRef(null)\n\n  useEffect(() => {\n    if (!root) return\n\n    const placeholderDOM = placeholderRef.current\n    const containerDOM = containerRef.current\n\n    const onScroll = throttle(60, () => {\n      const { top } = placeholderDOM.getBoundingClientRect()\n      if (top <= offset) {\n        containerDOM.style.position = 'fixed'\n        containerDOM.style.top = `${offset}px`\n        placeholderDOM.style.height = `${height}px`\n      } else {\n        containerDOM.style.position = 'static'\n        placeholderDOM.style.height = '0px'\n      }\n    })\n    root.addEventListener('scroll', onScroll)\n    return () => {\n      root.removeEventListener('scroll', onScroll)\n    }\n  }, [root, offset, height])\n\n  return (\n    <div className={styles.root}>\n      <div ref={placeholderRef} className=\"sticky-placeholder\" />\n      <div className=\"sticky-container\" ref={containerRef}>\n        {children}\n      </div>\n    </div>\n  )\n}\n\nexport default Sticky\n","import { http } from '@/utils'\nimport { Toast } from 'antd-mobile'\n\n// 文章\nconst getPending = () => ({ type: 'article/pengding' })\nconst getSuccess = info => ({ type: 'article/success', payload: info })\nconst setInfo = partialInfo => ({\n  type: 'article/set_info',\n  payload: partialInfo\n})\n\n// 评论\nconst getCommentPengding = () => ({ type: 'article/commeng_loading' })\nconst getComment = list => ({ type: 'article/comment', payload: list })\nconst getCommentMore = list => ({ type: 'article/comment_more', payload: list })\nconst setComment = partial => ({\n  type: 'article/set_comment',\n  payload: partial\n})\n\n/**\n * 根据 id 获取文章详情\n * @param {number} id 文章id\n * @returns thunk\n */\nconst getArticleInfo = id => {\n  return async dispatch => {\n    try {\n      dispatch(getPending())\n      const res = await http.get(`/articles/${id}`)\n\n      const articleInfo = res.data.data\n      dispatch(getSuccess(articleInfo))\n    } catch { }\n  }\n}\n\n/**\n * 获取评论\n * @param {object} param0 评论类型 和 id\n * @returns thunk\n */\nconst getCommentList = ({ type, source }) => {\n  return async dispatch => {\n    try {\n      dispatch(getCommentPengding())\n      const params = {\n        type,\n        source\n      }\n\n      const res = await http.get('/comments', {\n        params\n      })\n\n      dispatch(getComment(res.data.data))\n    } catch { }\n  }\n}\n\n/**\n * 获取评论\n * @param {object} param0 评论类型 和 id\n * @returns thunk\n */\nconst getMoreComment = ({ type, source, offset }) => {\n  return async dispatch => {\n    try {\n      dispatch(getCommentPengding())\n      const params = {\n        type,\n        source,\n        offset\n      }\n\n      const res = await http.get('/comments', {\n        params\n      })\n\n      dispatch(getCommentMore(res.data.data))\n    } catch { }\n  }\n}\n\n/**\n * 取消点赞\n * @param {string} id 文章id\n * @returns thunk\n */\nconst deleteLiking = id => {\n  return async (dispatch, getState) => {\n    const { article } = getState()\n\n    try {\n      await http.delete(`/article/likings/${id}`)\n      dispatch(\n        setInfo({\n          attitude: 0,\n          like_count: article.info.like_count - 1\n        })\n      )\n    } catch { }\n  }\n}\n\n/**\n * 文章点赞\n * @param {string} id 文章id\n * @returns thunk\n */\nconst updateLiking = id => {\n  return async (dispatch, getState) => {\n    const { article } = getState()\n\n    try {\n      await http.post('/article/likings', {\n        target: id\n      })\n\n      dispatch(\n        setInfo({\n          attitude: 1,\n          like_count: article.info.like_count + 1\n        })\n      )\n    } catch { }\n  }\n}\n\n/**\n * 取消收藏\n * @param {string} id 文章id\n * @returns thunk\n */\nconst deleteCollection = id => {\n  return async dispatch => {\n    try {\n      await http.delete(`/article/collections/${id}`)\n\n      dispatch(\n        setInfo({\n          is_collected: false\n        })\n      )\n    } catch { }\n  }\n}\n\n/**\n * 收藏\n * @param {string} id 文章id\n * @returns thunk\n */\nconst updateCollection = id => {\n  return async dispatch => {\n    try {\n      await http.post('/article/collections', {\n        target: id\n      })\n\n      dispatch(\n        setInfo({\n          is_collected: true\n        })\n      )\n    } catch { }\n  }\n}\n\n/**\n * 取消关注\n * @param {string} id 作者id\n * @returns thunk\n */\nconst deleteFollow = id => {\n  return async dispatch => {\n    try {\n      await http.delete(`/user/followings/${id}`)\n\n      dispatch(\n        setInfo({\n          is_followed: false\n        })\n      )\n    } catch (e) {\n      // console.log(e.message)\n      Toast.info(e.response.data.message, 0.8)\n    }\n  }\n}\n\n/**\n * 关注\n * @param {string} id 作者id\n * @returns thunk\n */\nconst updateFollow = id => {\n  return async dispatch => {\n    try {\n      await http.post('/user/followings', {\n        target: id\n      })\n      dispatch(\n        setInfo({\n          is_followed: true\n        })\n      )\n    } catch (e) {\n      // console.dir(e)\n      Toast.info(e.response.data.message, 0.8)\n    }\n  }\n}\n\n/**\n * 取消评论点赞\n * @param {string} id 评论id\n * @returns thunk\n */\nconst deleteCommentLiking = id => {\n  return async (dispatch, getState) => {\n    const { article } = getState()\n\n    try {\n      await http.delete(`/comment/likings/${id}`)\n      dispatch(\n        setComment({\n          results: article.comment.results.map(item => {\n            if (item.com_id === id) {\n              return {\n                ...item,\n                like_count: item.like_count - 1,\n                is_liking: false\n              }\n            }\n            return item\n          })\n        })\n      )\n    } catch { }\n  }\n}\n\n/**\n * 评论点赞\n * @param {string} id 评论id\n * @returns thunk\n */\nconst updateCommentLiking = id => {\n  return async (dispatch, getState) => {\n    const { article } = getState()\n    try {\n      await http.post('/comment/likings', {\n        target: id\n      })\n\n      dispatch(\n        setComment({\n          results: article.comment.results.map(item => {\n            if (item.com_id === id) {\n              return {\n                ...item,\n                like_count: item.like_count + 1,\n                is_liking: true\n              }\n            }\n            return item\n          })\n        })\n      )\n    } catch { }\n  }\n}\n\nexport {\n  getArticleInfo,\n  setInfo,\n  getCommentList,\n  getMoreComment,\n  setComment,\n  deleteLiking,\n  updateLiking,\n  deleteCollection,\n  updateCollection,\n  deleteFollow,\n  updateFollow,\n  deleteCommentLiking,\n  updateCommentLiking\n}\n","import { http } from '@/utils'\nimport differenceBy from 'lodash/differenceBy'\n\nconst getUser = channels => ({ type: 'home/channel', payload: channels })\nconst getRecommend = channels => ({ type: 'home/recommend', payload: channels })\n\n/**\n * 获取频道\n * @returns thunk\n */\nconst getUserChannel = () => {\n  return async dispatch => {\n    try {\n      const res = await http.get('/user/channels')\n      const { channels } = res.data.data\n      const newChannels = channels.map(item => ({\n        id: item.id,\n        title: item.name\n      }))\n      dispatch(getUser(newChannels))\n    } catch {}\n  }\n}\n\n/**\n * 获取所有频道中排除用户自己的频道数据\n * @param {Array} userChannles 用户自己的频道数组\n * @returns thunk\n */\nconst getRecommendChannel = userChannles => {\n  return async dispatch => {\n    try {\n      const res = await http.get('/channels')\n      let { channels } = res.data.data\n\n      channels = channels.map(item => ({ id: item.id, title: item.name }))\n\n      // 去掉 我的频道 中已有项\n      const newChannels = differenceBy(channels, userChannles, 'id')\n      dispatch(getRecommend(newChannels))\n    } catch {}\n  }\n}\n\n/**\n * 删除频道\n * @param {Object} deleteChannel 要删除的频道数据\n * @param {boolean} isLogin 是否登录\n * @returns thunk\n */\nconst deleteChannel = (deleteChannel, isLogin) => {\n  return async (dispatch, getState) => {\n    // 如果用户登录， 需要发送请求删除频道\n    // 如果用户没有登录， 需要删除本地的这个频道\n    // 不管登录还是没登录 都要删除redux中的频道\n    if (isLogin) {\n      try {\n        await http.delete(`/user/channels/${deleteChannel.id}`)\n      } catch {}\n    }\n\n    // 这里表示有没有登录 都要删除redux里面的数据\n    // getState可以拿到所有的redux数据  属性有 home/login/profile\n    const { home } = getState()\n    const channelsList = home.recommendChannel\n\n    // 保存频道 把传递id过滤掉\n    const newChannels = [...channelsList, deleteChannel].sort((a, b) => {\n      return a.id - b.id\n    })\n    dispatch(getRecommend(newChannels))\n  }\n}\n\n/**\n * 添加频道\n * @param {Object} addChannel 要添加的频道数据\n * @param {boolean} isLogin 是否登录\n * @returns thunk\n */\nconst addChannel = (addChannel, isLogin) => {\n  return async (dispatch, getState) => {\n    // 登录的就发请求去添加  ?  没有登录的添加到本地就可以\n    if (isLogin) {\n      try {\n        await http.patch('/user/channels', {      /// 更新 频道成功\n          channels: addChannel\n        })\n      } catch {}\n    }\n    // 2.保存数据到redux中 和 localStoreage中\n    // 有token往redux中存一份  没有token往redux存一份  本地存一份\n    const { home } = getState()\n    const channelsList = home.recommendChannel\n\n    const newChannels = channelsList.filter(item => item.id !== addChannel.id)\n    dispatch(getRecommend(newChannels))\n  }\n}\n\nconst setMoreAction = ({ id, visible }) => ({\n  type: 'home/more_action',\n  payload: { id, visible }\n})\n\nexport {\n  getUserChannel,\n  getUser,\n  getRecommendChannel,\n  deleteChannel,\n  addChannel,\n  setMoreAction\n}\n","import { http, removeTokens, setTokens } from '@/utils'   //utils下的indexjs\n\nconst saveToken = tokens => ({ type: 'login/token', payload: tokens })\n\n\nconst sendSms = mobile => {\n  // return async (dispatch) => { const res = await request({url: '/sms/mobile'+mobile, method: 'get'})}   300-视频中\n  // 返回值中不传 dispatch => 因为不用存储到本地和redux中\n  return () => {  http.get(`/sms/codes/${mobile}`)  }\n}\n\n\nconst login = values => {\n  return async dispatch => {\n    const res = await http.post('/authorizations', values) ///--------->   {mobile: '13900001111', code: '246810'}\n    // console.log(res)///--------->   res.data.data:    refresh_token: \"fecbdfeb-4e005f62129a\", token: \"c4fca56e-fe224785a857\"\n    // 保存到 redux 中\n    dispatch(saveToken(res.data.data))//(refresh_token, token)\n    // 保存到本地缓存中-localStorage\n    setTokens(res.data.data)\n  }\n}\n\nconst logout = () => {\n  return () => {\n    removeTokens()\n  }\n}\n\nexport { saveToken }\nexport { sendSms, login, logout }\n\n","import { http } from '@/utils'\n\n\n\n// redux的存储\n// 我的\nconst setUser = userInfo => ({ type: 'profile/user', payload: userInfo })\n// 个人资料\nconst setUserProfile = userProfile => ({ type: 'profile/profile', payload: userProfile })\n\n// 修改 昵称、简介、生日、性别 个人资料信息\nconst updateUserProfile = (name, value) => ({ type: 'profile/update', payload: { name, value } })\n\n\n\n\n// 数据的获取\n\n/**获取用户信息     @returns thunk      存储到redux中  */\nconst getProfile = () => {\n  return async dispatch => {\n      const res = await http.get('/user') //获取用户信息属性：art_count, fans_count, id, intro, name, photo   \n      dispatch(setUser(res.data.data))\n  }\n}\n\n/**获取用户个人资料   @returns thunk     存储到redux中   */\nconst getUserProfile = () => {\n  return async dispatch => {\n      const res = await http.get('/user/profile')//获取用户个人资料信息: birthday, gender, id, intro, name, mobile, photo\n      dispatch(setUserProfile(res.data.data))\n  }\n}\n\n/**修改 昵称、简介、生日、性别 个人资料信息    @returns thunk     存储到redux中   */\nconst updateProfile = (name, value) => {\n  return async dispatch => {\n    const res = await http.patch('/user/profile', {   [name]: value  })\n    res.data.message === 'OK' &&  dispatch(updateUserProfile(name, value))   //代替 if() {} 格式   表示res为true, 就渲染dispatch\n  }\n} \n\n/**更新头像       @returns thunk        存储到redux中     */\nconst updateAvatar = formData => {\n  return async dispatch => {\n    const res = await http.patch('/user/photo', formData, {  headers: { 'Content-Type': 'multipart/form-data'  } })\n    const { photo } = res.data.data\n    dispatch(updateUserProfile('photo', photo))   //-----> data: {photo: 'http://toutiao.itheima.net/uploads/1657022985170.jpg'}\n  }\n}\n\n\nexport { getProfile, getUserProfile, updateProfile, updateAvatar }\n","import Icon from '@/components/Icon'\nimport styles from './index.module.scss'\n\nconst CommentFooter = ({\n  comm_count,\n  attitude,\n  is_collected,\n  placeholder,\n  onComment,\n  onLike,\n  onCollected,\n  onShare,\n  onShowComment,\n  // normal 普通评论\n  // reply 回复评论\n  type = 'normal'\n}) => {\n  return (\n    <div className={styles.root}>\n      <div className=\"input-btn\" onClick={onComment}>\n        <Icon type=\"iconbianji\" />\n        <span>{placeholder}</span>\n      </div>\n      {type === 'normal' && (\n        <>\n          <div className=\"action-item\" onClick={onShowComment}>\n            <Icon type=\"iconbtn_comment\" />\n            <p>评论</p>\n            {comm_count !== 0 && <span className=\"bage\">{comm_count}</span>}\n          </div>\n          <div className=\"action-item\" onClick={onLike}>\n            <Icon\n              type={attitude === 1 ? 'iconbtn_like_sel' : 'iconbtn_like2'}\n            />\n            <p>点赞</p>\n          </div>\n        </>\n      )}\n\n      <div className=\"action-item\" onClick={onCollected}>\n        <Icon type={is_collected ? 'iconbtn_collect_sel' : 'iconbtn_collect'} />\n        <p>收藏</p>\n      </div>\n      <div className=\"action-item\" onClick={onShare}>\n        <Icon type=\"iconbtn_share\" />\n        <p>分享</p>\n      </div>\n    </div>\n  )\n}\n\nexport default CommentFooter\n","import NavBar from '@/components/NavBar'\nimport { http } from '@/utils'\nimport { useEffect, useRef, useState } from 'react'\nimport styles from './index.module.scss'\n\nconst CommentInput = ({ id, name, onClose, onComment, art_id }) => {\n  const [value, setValue] = useState('')\n  const txtRef = useRef(null)\n\n  useEffect(() => {\n    // 解决页面抖动的问题\n    setTimeout(() => {\n      txtRef.current.focus()\n    }, 600)\n  }, [])\n\n  const onChange = e => {\n    setValue(e.target.value)\n  }\n\n  const onSendComment = async () => {\n    if (value.trim() === '') return\n\n    const res = await http.post('/comments', {\n      target: id,\n      content: value,\n      // 回复评论是需要此参数\n      art_id\n    })\n\n    onComment(res.data.data.new_obj)\n    onClose()\n  }\n\n  return (\n    <div className={styles.root}>\n      <NavBar\n        onLeftClick={onClose}\n        rightContent={\n          <span className=\"publish\" onClick={onSendComment}>\n            发表\n          </span>\n        }\n      >\n        {name ? '回复评论' : '评论文章'}\n      </NavBar>\n\n      <div className=\"input-area\">\n        {name && <div className=\"at\">@{name}:</div>}\n        <textarea\n          ref={txtRef}\n          placeholder=\"说点什么~\"\n          rows=\"10\"\n          value={value}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default CommentInput\n","import Icon from '@/components/Icon'\nimport classnames from 'classnames'\nimport dayjs from 'dayjs'\nimport styles from './index.module.scss'\n\nconst CommentItem = ({\n  com_id,\n  aut_photo,\n  aut_name,\n  like_count,\n  is_followed,\n  is_liking,\n  content,\n  reply_count,\n  pubdate,\n  onThumbsUp,\n  onOpenReply = () => {},\n  // normal 普通\n  // origin 回复评论的原始评论\n  // reply 回复评论\n  type = 'normal'\n}) => {\n  // 关注 or 点赞\n  const thumbsUp =\n    type === 'normal' ? (\n      <span className=\"thumbs-up\" onClick={onThumbsUp}>\n        {like_count}\n        <Icon type={is_liking ? 'iconbtn_like_sel' : 'iconbtn_like2'} />\n      </span>\n    ) : (\n      <span className={classnames('follow', is_followed ? 'followed' : '')}>\n        {is_followed ? '已关注' : '关注'}\n      </span>\n    )\n\n  // 回复按钮\n  const replyJSX =\n    type === 'normal' ? (\n      <span className=\"replay\" onClick={() => onOpenReply(com_id)}>\n        {reply_count === 0 ? '' : reply_count}回复\n        <Icon type=\"iconbtn_right\" />\n      </span>\n    ) : null\n\n  return (\n    <div className={styles.root}>\n      <div className=\"avatar\">\n        <img src={aut_photo} alt=\"\" />\n      </div>\n      <div className=\"comment-info\">\n        <div className=\"comment-info-header\">\n          <span className=\"name\">{aut_name}</span>\n          {thumbsUp}\n        </div>\n        <div className=\"comment-content\">{content}</div>\n        <div className=\"comment-footer\">\n          {replyJSX}\n          <span className=\"comment-time\">{dayjs().from(pubdate)}</span>\n          {/* 未提供举报评论接口 */}\n          {/* <Icon className=\"close\" type=\"iconbtn_essay_close\" /> */}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default CommentItem\n","import NavBar from '@/components/NavBar'\nimport NoneComment from '@/components/NoneComment'\nimport { http } from '@/utils'\nimport { Drawer } from 'antd-mobile'\nimport { useEffect, useState } from 'react'\nimport CommentFooter from '../CommentFooter'\nimport CommentInput from '../CommentInput'\nimport CommentItem from '../CommentItem'\nimport styles from './index.module.scss'\n\nconst Reply = ({ data, art_id, onClose }) => {\n  const { com_id, aut_name } = data\n\n  const [comment, setComment] = useState({})\n  const [commentOpen, setCommentOpen] = useState({\n    visible: false,\n    id: com_id\n  })\n\n  useEffect(() => {\n    const loadData = async () => {\n      const res = await http.get('/comments', {\n        params: {\n          type: 'c',\n          source: com_id\n        }\n      })\n      setComment(res.data.data)\n    }\n\n    if (com_id) {\n      loadData()\n    }\n  }, [com_id])\n\n  // 展示评论窗口\n  const onComment = () => {\n    setCommentOpen({\n      visible: true,\n      id: com_id\n    })\n  }\n\n  // 关闭评论窗口\n  const onCloseComment = () => {\n    setCommentOpen({\n      visible: false,\n      id: 0\n    })\n  }\n\n  // 发表评论后，插入到数据中\n  const onInsertComment = data => {\n    setComment({\n      ...comment,\n      total_count: comment.total_count + 1,\n      results: [data, ...comment.results]\n    })\n  }\n\n  const { total_count, results } = comment\n\n\n\n\n\n\n\n\n\n\n  \n  return (\n    <div className={styles.root}>\n      <div className=\"reply-wrapper\">\n        <NavBar className=\"transparent-navbar\" onLeftClick={onClose}>\n          {total_count}条回复\n        </NavBar>\n\n        <div className=\"origin-comment\">\n          <CommentItem type=\"origin\" {...data} />\n        </div>\n\n        <div className=\"reply-list\">\n          <div className=\"reply-header\">全部回复</div>\n          {results?.length > 0 ? (\n            results.map(item => <CommentItem key={item.com_id} {...item} />)\n          ) : (\n            <NoneComment />\n          )}\n        </div>\n\n        <CommentFooter\n          placeholder=\"去评论\"\n          type=\"reply\"\n          onComment={onComment}\n        />\n      </div>\n      <Drawer\n        className=\"drawer\"\n        position=\"bottom\"\n        style={{ minHeight: document.documentElement.clientHeight }}\n        sidebar={\n          <div className=\"drawer-sidebar-wrapper\">\n            {commentOpen.visible && (\n              <CommentInput\n                id={commentOpen.id}\n                art_id={art_id}\n                name={aut_name}\n                onClose={onCloseComment}\n                onComment={onInsertComment}\n              />\n            )}\n          </div>\n        }\n        open={commentOpen.visible}\n        onOpenChange={onCloseComment}\n      >\n        {''}\n      </Drawer>\n    </div>\n  )\n}\n\nexport default Reply\n","import styles from './index.module.scss'\n\nconst Share = ({ onClose }) => {\n  return (\n    <div className={styles.root}>\n      <div className=\"share-header\">立即分享给好友</div>\n      <div className=\"share-list\">\n        <div className=\"share-item\">\n          <img\n            src=\"https://img01.yzcdn.cn/vant/share-sheet-wechat.png\"\n            alt=\"\"\n          />\n          <span>微信</span>\n        </div>\n        <div className=\"share-item\">\n          <img\n            src=\"https://img01.yzcdn.cn/vant/share-sheet-wechat-moments.png\"\n            alt=\"\"\n          />\n          <span>朋友圈</span>\n        </div>\n        <div className=\"share-item\">\n          <img src=\"https://img01.yzcdn.cn/vant/share-sheet-weibo.png\" alt=\"\" />\n          <span>微博</span>\n        </div>\n        <div className=\"share-item\">\n          <img src=\"https://img01.yzcdn.cn/vant/share-sheet-qq.png\" alt=\"\" />\n          <span>QQ</span>\n        </div>\n      </div>\n      <div className=\"share-list\">\n        <div className=\"share-item\">\n          <img src=\"https://img01.yzcdn.cn/vant/share-sheet-link.png\" alt=\"\" />\n          <span>复制链接</span>\n        </div>\n        <div className=\"share-item\">\n          <img\n            src=\"https://img01.yzcdn.cn/vant/share-sheet-poster.png\"\n            alt=\"\"\n          />\n          <span>分享海报</span>\n        </div>\n        <div className=\"share-item\">\n          <img\n            src=\"https://img01.yzcdn.cn/vant/share-sheet-qrcode.png\"\n            alt=\"\"\n          />\n          <span>二维码</span>\n        </div>\n        <div className=\"share-item\">\n          <img\n            src=\"https://img01.yzcdn.cn/vant/share-sheet-weapp-qrcode.png\"\n            alt=\"\"\n          />\n          <span>小程序码</span>\n        </div>\n      </div>\n      <div className=\"share-cancel\" onClick={onClose}>\n        取消\n      </div>\n    </div>\n  )\n}\n\nexport default Share\n","import Icon from '@/components/Icon'\nimport NavBar from '@/components/NavBar'\nimport NoneComment from '@/components/NoneComment'\nimport Sticky from '@/components/Sticky'\nimport {\n  deleteCollection, deleteCommentLiking, deleteFollow, deleteLiking, getArticleInfo, getCommentList,\n  getMoreComment,\n  setComment, setInfo, updateCollection, updateCommentLiking, updateFollow, updateLiking\n} from '@/store/actions'\nimport { Drawer } from 'antd-mobile'\nimport classNames from 'classnames'\nimport dayjs from 'dayjs'\nimport DOMPurify from 'dompurify'\nimport hljs from 'highlight.js'\nimport 'highlight.js/styles/vs2015.css'\nimport throttle from 'lodash/fp/throttle'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport ContentLoader from 'react-content-loader'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory, useParams } from 'react-router-dom'\nimport CommentFooter from './components/CommentFooter'\nimport CommentInput from './components/CommentInput'\nimport CommentItem from './components/CommentItem'\nimport Reply from './components/Reply'\nimport Share from './components/Share'\nimport styles from './index.module.scss'\n\nconst useScroll = (\n  handleScroll = () => {},\n  {\n    container,\n    placeholder,\n    isFinished = () => false,\n    offset = 300,\n    stop = false\n  }\n) => {\n  const [loading, setLoading] = useState(false)\n  const [finished, setFinished] = useState(false)\n\n  const onScroll = useMemo(\n    () =>\n      throttle(200, async () => {\n        if (finished) return\n\n        const { bottom: scrollBottom } = container.getBoundingClientRect()\n        const { bottom: placehoderBottom } = placeholder.getBoundingClientRect()\n        if (placehoderBottom - scrollBottom <= offset) {\n          setLoading(true)\n          await handleScroll()\n          setLoading(false)\n          setFinished(isFinished())\n        }\n      }),\n    [handleScroll, placeholder, container, offset, finished, isFinished]\n  )\n\n  useEffect(() => {\n    if (!container || !placeholder) return\n    if (stop) return\n\n    container.addEventListener('scroll', onScroll)\n    return () => container.removeEventListener('scroll', onScroll)\n  }, [container, placeholder, onScroll, stop])\n\n  return { loading, finished }\n}\n\nconst Article = () => {\n  const dispatch = useDispatch()\n  const {\n    isLoading: isArticleLoading,\n    info: articleDetail,\n    comment: articleComment,\n    isCommentLoading\n  } = useSelector(state => state.article)\n  const [commentOpen, setCommentOpen] = useState({\n    visible: false,\n    id: 0\n  })\n  const [replyOpen, setReplyOpen] = useState({\n    visible: false,\n    data: {}\n  })\n  const [shareOpen, setShareOpen] = useState(false)\n  const [showNavAuthor, setShowNavAuthor] = useState(false)\n  // const [finished, setFinished] = useState(false)\n  const authorRef = useRef()\n  const wrapperRef = useRef()\n  const commentRef = useRef()\n\n  // list 列表\n  const listRootRef = useRef()\n  const listPlaceholderRef = useRef()\n\n  const { id } = useParams()\n  const history = useHistory()\n\n  // https://upmostly.com/tutorials/build-an-infinite-scroll-component-in-react-using-react-hooks\n  const { finished /* loading */ } = useScroll(\n    useCallback(() => {\n      dispatch(\n        getMoreComment({\n          type: 'a',\n          source: id,\n          offset: articleComment.last_id\n        })\n      )\n    }, [articleComment.last_id, dispatch, id]),\n    {\n      container: wrapperRef.current,\n      placeholder: listPlaceholderRef.current,\n      stop:\n        isArticleLoading ||\n        articleComment.results.length === 0 ||\n        isCommentLoading,\n      isFinished: () => articleComment.end_id === articleComment.last_id\n    }\n  )\n\n  // console.log('finished', finished, 'loading', loading)\n\n  // 获取文章详情\n  useEffect(() => {\n    dispatch(getArticleInfo(id))\n  }, [dispatch, id])\n\n  // 获取文章评论\n  useEffect(() => {\n    dispatch(getCommentList({ type: 'a', source: id }))\n  }, [dispatch, id])\n\n  // 文章详情 代码内容 高亮\n  useEffect(() => {\n    if (isArticleLoading) return\n\n    const dgHtml = document.querySelector('.dg-html')\n    const codes = dgHtml.querySelectorAll('pre code')\n\n    hljs.configure({\n      // 忽略警告\n      ignoreUnescapedHTML: true\n    })\n\n    if (codes.length > 0) {\n      codes.forEach(block => {\n        hljs.highlightElement(block)\n      })\n      return\n    }\n\n    const pre = dgHtml.querySelectorAll('pre')\n    if (pre.length > 0) {\n      pre.forEach(block => {\n        hljs.highlightElement(block)\n      })\n    }\n  }, [isArticleLoading])\n\n  // 监听滚动 - 在 NavBar 中显示作者信息\n  useEffect(() => {\n    if (isArticleLoading) return\n\n    const wrapperDOM = wrapperRef.current\n\n    const onScroll = throttle(200, () => {\n      const { top } = authorRef.current.getBoundingClientRect()\n      if (top <= 0) {\n        setShowNavAuthor(true)\n      } else {\n        showNavAuthor && setShowNavAuthor(false)\n      }\n    })\n\n    wrapperDOM.addEventListener('scroll', onScroll)\n    return () => wrapperDOM.removeEventListener('scroll', onScroll)\n  }, [showNavAuthor, isArticleLoading])\n\n  // 加载更多评论数据\n  // useEffect(() => {\n  //   if (isArticleLoading) return\n  //   if (articleComment.results.length === 0) return\n  //   if (isCommentLoading || finished) return\n\n  //   // const listRootDOM = listRootRef.current\n  //   const listPlacehoderDOM = listPlaceholderRef.current\n  //   // 可滚动区域\n  //   const wrapperDOM = wrapperRef.current\n\n  //   const onScroll = throttle(200, async () => {\n  //     const { bottom: scrollBottom } = wrapperDOM.getBoundingClientRect()\n  //     const { bottom: placehoderBottom } =\n  //       listPlacehoderDOM.getBoundingClientRect()\n\n  //     if (placehoderBottom - scrollBottom <= 300) {\n  //       // 触底\n  //       if (articleComment.end_id === articleComment.last_id) {\n  //         // 加载完成\n  //         setFinished(true)\n  //       } else {\n  //         // 加载下一页数据\n  //         dispatch(\n  //           getMoreComment({\n  //             type: 'a',\n  //             source: id,\n  //             offset: articleComment.last_id\n  //           })\n  //         )\n  //       }\n  //     }\n  //   })\n\n  //   wrapperDOM.addEventListener('scroll', onScroll)\n  //   return () => wrapperDOM.removeEventListener('scroll', onScroll)\n  // }, [\n  //   dispatch,\n  //   isArticleLoading,\n  //   isCommentLoading,\n  //   finished,\n  //   id,\n  //   articleComment.end_id,\n  //   articleComment.last_id,\n  //   articleComment.results.length\n  // ])\n\n  // 打开回复评论窗口\n  const onOpenReply = data => {\n    setReplyOpen({\n      visible: true,\n      data\n    })\n  }\n\n  // 关闭回复评论窗口\n  const onCloseReply = () => {\n    setReplyOpen({\n      visible: false,\n      data: {}\n    })\n  }\n\n  // 展示评论窗口\n  const onComment = () => {\n    setCommentOpen({\n      visible: true,\n      id: art_id\n    })\n  }\n\n  // 关闭评论窗口\n  const onCloseComment = () => {\n    setCommentOpen({\n      visible: false,\n      id: 0\n    })\n  }\n\n  // 发表评论后，插入到数据中\n  const onInsertComment = comment => {\n    dispatch(\n      setComment({\n        results: [comment, ...articleComment.results]\n      })\n    )\n\n    dispatch(\n      setInfo({\n        comm_count: articleDetail.comm_count + 1\n      })\n    )\n  }\n\n  // 文章点赞\n  const onLike = async () => {\n    if (attitude === 1) {\n      // 取消点赞\n      dispatch(deleteLiking(art_id))\n      return\n    }\n\n    // 点赞\n    dispatch(updateLiking(art_id))\n  }\n\n  // 收藏\n  const onCollected = async () => {\n    if (is_collected) {\n      // 取消收藏\n      dispatch(deleteCollection(art_id))\n      return\n    }\n\n    // 收藏\n    dispatch(updateCollection(art_id))\n  }\n\n  // 关注\n  const onFollow = async () => {\n    if (is_followed) {\n      // 取消关注\n      dispatch(deleteFollow(aut_id))\n      return\n    }\n\n    // 关注\n    dispatch(updateFollow(aut_id))\n  }\n\n  // 评论点赞\n  const onThumbsUp = async (com_id, is_liking) => {\n    if (is_liking) {\n      // 取消评论点赞\n      dispatch(deleteCommentLiking(com_id))\n      return\n    }\n\n    // 评论点赞\n    dispatch(updateCommentLiking(com_id))\n  }\n\n  // 点击查看评论\n  const onShowComment = () => {\n    wrapperRef.current.scrollTop = commentRef.current.offsetTop - 46\n  }\n\n  // 文章\n  const {\n    art_id,\n    attitude,\n    aut_id,\n    aut_name,\n    aut_photo,\n    comm_count,\n    content,\n    is_collected,\n    is_followed,\n    like_count,\n    pubdate,\n    read_count,\n    title\n  } = articleDetail\n\n  // 文章评论\n  const { results } = articleComment\n\n  const date = dayjs(pubdate).format('YYYY-MM-DD')\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n  return (\n    <div className={styles.root}>\n      <div className=\"root-wrapper\">\n        <NavBar\n          onLeftClick={() => history.go(-1)}\n          rightContent={\n            <span onClick={() => setShareOpen(true)}>\n              <Icon type=\"icongengduo\" />\n            </span>\n          }\n        >\n          {showNavAuthor && (\n            <div className=\"nav-author\">\n              <img src={aut_photo} alt=\"\" />\n              <span className=\"name\">{aut_name}</span>\n              <span\n                onClick={onFollow}\n                className={classNames('follow', is_followed ? 'followed' : '')}\n              >\n                {is_followed ? '已关注' : '关注'}\n              </span>\n            </div>\n          )}\n        </NavBar>\n        {isArticleLoading ? (\n          <ContentLoader\n            speed={2}\n            width={375}\n            height={230}\n            viewBox=\"0 0 375 230\"\n            backgroundColor=\"#f3f3f3\"\n            foregroundColor=\"#ecebeb\"\n          >\n            {/* https://skeletonreact.com/ */}\n            <rect x=\"16\" y=\"8\" rx=\"3\" ry=\"3\" width=\"340\" height=\"10\" />\n            <rect x=\"16\" y=\"26\" rx=\"0\" ry=\"0\" width=\"70\" height=\"6\" />\n            <rect x=\"96\" y=\"26\" rx=\"0\" ry=\"0\" width=\"50\" height=\"6\" />\n            <rect x=\"156\" y=\"26\" rx=\"0\" ry=\"0\" width=\"50\" height=\"6\" />\n            <circle cx=\"33\" cy=\"69\" r=\"17\" />\n            <rect x=\"60\" y=\"65\" rx=\"0\" ry=\"0\" width=\"45\" height=\"6\" />\n            <rect x=\"304\" y=\"65\" rx=\"0\" ry=\"0\" width=\"52\" height=\"6\" />\n            <rect x=\"16\" y=\"114\" rx=\"0\" ry=\"0\" width=\"340\" height=\"15\" />\n            <rect x=\"263\" y=\"208\" rx=\"0\" ry=\"0\" width=\"94\" height=\"19\" />\n            <rect x=\"16\" y=\"141\" rx=\"0\" ry=\"0\" width=\"340\" height=\"15\" />\n            <rect x=\"16\" y=\"166\" rx=\"0\" ry=\"0\" width=\"340\" height=\"15\" />\n          </ContentLoader>\n        ) : (\n          <>\n            <div className=\"wrapper\" ref={wrapperRef}>\n              <div className=\"article-wrapper\">\n                <div className=\"header\">\n                  <h1 className=\"title\">{title}</h1>\n\n                  <div className=\"info\">\n                    <span>{date}</span>\n                    <span>{read_count} 阅读</span>\n                    <span>{comm_count} 评论</span>\n                  </div>\n\n                  <div className=\"author\" ref={authorRef}>\n                    <img src={aut_photo} alt=\"\" />\n                    <span className=\"name\">{aut_name}</span>\n                    <span\n                      onClick={onFollow}\n                      className={classNames(\n                        'follow',\n                        is_followed ? 'followed' : ''\n                      )}\n                    >\n                      {is_followed ? '已关注' : '关注'}\n                    </span>\n                  </div>\n                </div>\n\n                <div className=\"content\">\n                  <div\n                    className=\"content-html dg-html\"\n                    dangerouslySetInnerHTML={{\n                      __html: DOMPurify.sanitize(content || '')\n                    }}\n                  />\n                  <div className=\"date\">发布文章时间：{date}</div>\n                </div>\n              </div>\n\n              <div className=\"comment\" ref={commentRef}>\n                <Sticky root={wrapperRef.current} height={51} offset={46}>\n                  <div className=\"comment-header\">\n                    <span>全部评论（{comm_count}）</span>\n                    <span>{like_count} 点赞</span>\n                  </div>\n                </Sticky>\n                {comm_count === 0 ? (\n                  <NoneComment />\n                ) : (\n                  <div className=\"comment-list\" ref={listRootRef}>\n                    {results?.map(item => {\n                      const { com_id, is_liking } = item\n                      return (\n                        <CommentItem\n                          key={com_id}\n                          {...item}\n                          onOpenReply={() => onOpenReply(item)}\n                          onThumbsUp={() => onThumbsUp(com_id, is_liking)}\n                        />\n                      )\n                    })}\n\n                    {isCommentLoading && (\n                      <div className=\"list-loading\">加载中...</div>\n                    )}\n                    {finished && <div className=\"no-more\">没有更多了</div>}\n                    <div className=\"placeholder\" ref={listPlaceholderRef}></div>\n                  </div>\n                )}\n              </div>\n            </div>\n            <CommentFooter\n              comm_count={comm_count}\n              placeholder={comm_count === 0 ? '抢沙发' : '去评论'}\n              onComment={onComment}\n              attitude={attitude}\n              onLike={onLike}\n              is_collected={is_collected}\n              onCollected={onCollected}\n              onShare={() => setShareOpen(true)}\n              onShowComment={onShowComment}\n            />\n          </>\n        )}\n      </div>\n\n      {/* 评论 */}\n      <Drawer\n        className=\"drawer\"\n        position=\"bottom\"\n        style={{ minHeight: document.documentElement.clientHeight }}\n        sidebar={\n          <div className=\"drawer-sidebar-wrapper\">\n            {commentOpen.visible && (\n              <CommentInput\n                id={commentOpen.id}\n                onClose={onCloseComment}\n                onComment={onInsertComment}\n              />\n            )}\n          </div>\n        }\n        open={commentOpen.visible}\n        onOpenChange={onCloseComment}\n      >\n        {''}\n      </Drawer>\n\n      {/* 回复 */}\n      <Drawer\n        className=\"drawer-right\"\n        position=\"right\"\n        style={{ minHeight: document.documentElement.clientHeight }}\n        sidebar={\n          <div className=\"drawer-sidebar-wrapper\">\n            {replyOpen.visible && (\n              <Reply\n                data={replyOpen.data}\n                art_id={art_id}\n                onClose={onCloseReply}\n              />\n            )}\n          </div>\n        }\n        open={replyOpen.visible}\n        onOpenChange={onCloseReply}\n      >\n        {''}\n      </Drawer>\n\n      {/* 更多 */}\n      <Drawer\n        className=\"drawer-share\"\n        position=\"bottom\"\n        style={{ minHeight: document.documentElement.clientHeight }}\n        sidebar={<Share onClose={() => setShareOpen(false)} />}\n        open={shareOpen}\n        onOpenChange={() => setShareOpen(false)}\n      >\n        {''}\n      </Drawer>\n    </div>\n  )\n}\n\nexport default Article\n\n/*\n// comment item\n<div className=\"comment-item\">\n  <div className=\"avatar\">\n    <img\n      src=\"http://toutiao.itheima.net/images/user_head.jpg\"\n      alt=\"\"\n    />\n  </div>\n  <div className=\"comment-info\">\n    <div className=\"comment-info-header\">\n      <span className=\"name\">Wen Yahui</span>\n      <span className=\"thumbs-up\">\n        1090\n        <svg className=\"icon\" aria-hidden=\"true\">\n          <use xlinkHref=\"#iconbtn_like2\"></use>\n        </svg>\n      </span>\n    </div>\n    <div className=\"comment-content\">\n      现在实现的应该是类似于大脑信号的输出，有没有可能以后实现脑接口信号的输入，从此人类从一代一代知识的传递变成知识的直接下载，学习好累呀。\n    </div>\n    <div className=\"comment-footer\">\n      <span className=\"replay\" onClick={() => setOpen1(true)}>\n        2回复\n        <span className=\"icon\"> &gt;</span>\n      </span>\n      <span className=\"comment-time\">2小时前</span>\n      <svg className=\"icon close\" aria-hidden=\"true\">\n        <use xlinkHref=\"#iconbtn_essay_close\"></use>\n      </svg>\n    </div>\n  </div>\n</div>\n*/\n\n/*\n  // footer\n  <div className=\"footer\">\n    <div className=\"input-btn\" onClick={() => setOpen(true)}>\n      <Icon type=\"iconbianji\" />\n      <span>抢沙发</span>\n    </div>\n    <div className=\"action-item\">\n      <Icon type=\"iconbtn_comment\" />\n      <p>评论</p>\n      {comm_count && <span className=\"bage\">{comm_count}</span>}\n    </div>\n    <div className=\"action-item\">\n      <Icon type={is_followed ? 'iconbtn_like_sel' : 'iconbtn_like2'} />\n      <p>点赞</p>\n    </div>\n    <div className=\"action-item\">\n      <Icon\n        type={is_collected ? 'iconbtn_collect_sel' : 'iconbtn_collect'}\n      />\n      <p>收藏</p>\n    </div>\n    <div className=\"action-item\">\n      <Icon type=\"iconbtn_share\" />\n      <p>分享</p>\n    </div>\n  </div>\n*/\n","import { useEffect, useState, useRef } from 'react'\nimport classnames from 'classnames'\nimport PropTypes from 'prop-types'\n\nimport styles from './index.module.scss'\nimport React from 'react'\n\nconst Tabs = ({ index = 0, tabs = [], children, onChange }) => {\n  const navRef = useRef()\n  const lineRef = useRef()\n\n  const [activeIndex, setActiveIndex] = useState(index)\n\n  const changeTab = index => {\n    setActiveIndex(index)\n    onChange(index)\n  }\n\n  // https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html\n  // https://github.com/facebook/react/issues/14830\n  useEffect(() => {\n    setActiveIndex(index)\n  }, [index])\n\n  // useEffect 操作DOM\n  useEffect(() => {\n    // TODO: 清理上一次的 animate\n\n    const activeTab = navRef.current.children[activeIndex]\n\n    const activeTabWidth = activeTab.offsetWidth || 60\n    // 注意：第一次获取 offsetLeft 值为 0 ，以后每次获取为 8\n    //      所以，设置默认值 8，让所有情况下 offsetLeft 值都相同\n    const activeOffsetLeft = activeTab.offsetLeft || 8\n    const tabWidth = navRef.current.offsetWidth || 289\n\n    const to = activeOffsetLeft - (tabWidth - activeTabWidth) / 2\n    // navRef.current.scrollLeft = to\n    const from = navRef.current.scrollLeft\n    const frames = Math.round((0.2 * 1000) / 16)\n    let count = 0\n    function animate() {\n      navRef.current.scrollLeft += (to - from) / frames\n\n      if (++count < frames) {\n        requestAnimationFrame(animate)\n      }\n    }\n\n    animate()\n\n    // window.innerWidth / 375： 手动处理 JS 移动端适配\n    // 说明：15 表示 Line 宽度的一半\n    lineRef.current.style.transform = `translateX(${\n      activeOffsetLeft + activeTabWidth / 2 - 15 * (window.innerWidth / 375)\n    }px)`\n\n    // 注意： 由于 tabs 数据是动态获取的，所以，为了能够在 tabs 数据加载完成后\n    //       获取到 tab，所以，此处将 tabs 作为依赖项。\n    //       否则，会导致 navRef.current.children[activeIndex] 拿到的是 line 而不是第一个tab\n  }, [activeIndex, tabs])\n\n  return (\n    <div className={styles.root}>\n      <div className=\"tabs\">\n        <div className=\"tabs-wrap\">\n          <div className=\"tabs-nav\" ref={navRef}>\n            {tabs.map((item, i) => (\n              <div\n                className={classnames('tab', i === activeIndex ? 'active' : '')}\n                key={i}\n                onClick={() => changeTab(i)}\n              >\n                <span>{item.title}</span>\n              </div>\n            ))}\n            <div className=\"tab-line\" ref={lineRef}></div>\n          </div>\n        </div>\n\n        <div className=\"tabs-content\">\n          {React.Children.map(children, child => {\n            return React.cloneElement(child, {\n              activeId: tabs[activeIndex]?.id || 0\n            })\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nTabs.propTypes = {\n  tabs: PropTypes.array.isRequired,\n  children: PropTypes.arrayOf(PropTypes.element)\n}\n\nexport default Tabs\n","import { useEffect, memo } from 'react'\nimport classnames from 'classnames'\nimport { useState, useRef } from 'react'\n\nimport Icon from '../Icon'\n\nimport styles from './index.module.scss'\n\nconst Image = memo(({ src, className }) => {\n  // 控制是否加载失败\n  const [isError, setIsError] = useState(false)\n  // 控制是否加载\n  const [isLoading, setIsLoading] = useState(true)\n\n  const imgRef = useRef(null)\n\n  // 图片加载完成\n  const onLoad = () => {\n    setIsLoading(false) /* 表示加载完了 */\n  }\n\n  // 图片加载失败\n  const onError = () => {\n    setIsError(true) /* 表示加载失败了 */\n  }\n\n  // 渲染 loading or error 占位符\n  const renderPlaceholder = () => {\n    if (isError) {\n      return (\n        <div className=\"image-icon\">\n          <Icon type=\"iconphoto-fail\" />\n        </div>\n      )\n    }\n\n    if (isLoading) {\n      return (\n        <div className=\"image-icon\">\n          <Icon type=\"iconphoto\" />\n        </div>\n      )\n    }\n\n    return null\n  }\n\n  /**\n   * 渲染图片\n   */\n  const renderImage = () => {\n    if (isError) return null\n    return (\n      <img\n        ref={imgRef}    /* 绑定 ref */\n        data-src={src}   \n        onLoad={onLoad}\n        onError={onError}\n        alt=\"\"\n      />\n    )\n  }\n\n  // 图片懒加载\n  useEffect(() => {\n    // 监听图片\n    const imageObserver = new IntersectionObserver(\n      (entries, imgObserver) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            // 图片在可视区\n            const lazyImage = entry.target\n            lazyImage.src = lazyImage.dataset.src\n          }\n        })\n      }\n      // ,\n      // {\n      //   // 可滚动元素\n      //   // root: document.querySelector('.articles').firstElementChild,\n      //   // 提前或延迟加载的距离\n      //   // 比如，140px 表示距离图片展示在可视区域还有 140px 时，就家在图片\n      //   // rootMargin: '140px 0px 140px 0px'\n      // }\n    )\n\n    imageObserver.observe(imgRef.current)\n\n    return () => imageObserver.disconnect()\n  }, [])\n\n\n\n\n\n  \n  return (\n    <div className={classnames(styles.root, className)}>\n      {renderPlaceholder()}\n      {renderImage()}\n    </div>\n  )\n})\n\nexport default Image\n","import { memo } from 'react'\nimport classnames from 'classnames'\n\nimport dayjs from 'dayjs'\nimport relativeTime from 'dayjs/plugin/relativeTime'\nimport 'dayjs/locale/zh-cn'\n\nimport Icon from '@/components/Icon'\nimport Image from '@/components/Image'\n\nimport styles from './index.module.scss'\n\ndayjs.locale('zh-cn')\ndayjs.extend(relativeTime)\n\nconst ArticleItem = memo(\n  // 结构出来的result属性\n  ({  art_id,  type,  title,  images,  aut_name,  comm_count,  pubdate,  isLogin,  onFeedback  }) => {\n    \n    \n    return ( \n      <div className={styles.root}>\n        <div\n          className={classnames(\n            'article-content',\n            type === 3 ? 't3' : '',\n            type === 0 ? 'none-mt' : ''\n          )}\n        >\n          <h3>{title}</h3>\n          {/* type !== 0 表示有图 */}\n          {type !== 0 && (\n            <div className=\"article-imgs\">\n              {images.map((item, i) => {\n                return (\n                  <div className=\"article-img-wrapper\" key={i}>\n                    <Image src={item} />\n                    {/* <img src={item} alt=\"\" /> */}\n                  </div>\n                )\n              })}\n            </div>\n          )}\n        </div>\n        <div\n          className={classnames('article-info', type === 0 ? 'none-mt' : '')}\n        >\n          <span>{aut_name}</span>\n          <span>{comm_count} 评论</span>\n          <span>{dayjs().from(pubdate)}</span>\n          \n          {/* 如果未登录 不渲染❌     如果登录了  渲染 */}\n          {isLogin && (\n            <span\n              className=\"close\"\n              onClick={e => {\n                e.stopPropagation()\n                onFeedback(art_id)\n              }}\n            >\n              <Icon type=\"iconbtn_essay_close\" />\n            </span>  \n          )}\n        </div>\n      </div>\n    )\n  }\n)\n\nexport default ArticleItem\n","import ArticleItem from '@/components/ArticleItem'\nimport { setMoreAction } from '@/store/actions'\nimport { http, isAuth } from '@/utils'\nimport { PullToRefresh } from 'antd-mobile'\nimport { memo, useCallback, useEffect, useRef, useState } from 'react'\nimport ContentLoader from 'react-content-loader'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport { areEqual, VariableSizeList as List } from 'react-window'\nimport InfiniteLoader from 'react-window-infinite-loader'\nimport styles from './index.module.scss'\n\n\n\n\nconst Row = memo(({ index, style, data, setSize }) => {\n  const dispatch = useDispatch()\n  const isLogin = isAuth()\n  const rowRef = useRef()\n  const history = useHistory()\n  const item = data.list[index]\n\n  // console.log(data, item)\n  // https://tiagohorta1995.medium.com/dynamic-list-virtualization-using-react-window-ab6fbf10bfb2\n  useEffect(() => {\n    if (rowRef.current) {\n      setSize(index, rowRef.current.scrollHeight)\n    }\n  }, [rowRef, index, setSize])\n\n  if (!item) {\n    return (\n      <ContentLoader\n        speed={2}\n        width={375}\n        height={137}\n        viewBox=\"0 0 375 137\"\n        backgroundColor=\"#f3f3f3\"\n        foregroundColor=\"#ecebeb\"\n      >\n        <rect x=\"16\" y=\"15\" rx=\"3\" ry=\"3\" width=\"223\" height=\"22\" />\n        <rect x=\"245\" y=\"14\" rx=\"3\" ry=\"3\" width=\"110\" height=\"80\" />\n        <rect x=\"16\" y=\"105\" rx=\"0\" ry=\"0\" width=\"50\" height=\"22\" />\n        <rect x=\"76\" y=\"105\" rx=\"0\" ry=\"0\" width=\"50\" height=\"22\" />\n        <rect x=\"136\" y=\"105\" rx=\"0\" ry=\"0\" width=\"50\" height=\"22\" />\n      </ContentLoader>\n    )\n  }\n\n  const { art_id } = item\n\n  const onToAritcleDetail = () => {\n    history.push(`/article/${art_id}`)\n  }\n\n\n  // 点击❌的回调函数\n  const onFeedback = art_id => {\n    dispatch(setMoreAction({\n      id: art_id,     //文章的id\n      visible: true   //显示 true\n    }))\n  }\n\n  const {  aut_name,  comm_count,  pubdate,  title,  cover: { type, images }  } = item\n\n  // 把这些属性向ActicleItem组件中传递属性\n  const articleItemProps = {  art_id,  type,  title,  aut_name,  comm_count,  pubdate,  images,  isLogin  }\n\n  return (\n    <div\n      style={style}\n      className=\"article-item\"\n      ref={rowRef}\n      onClick={onToAritcleDetail}\n    >\n      <ArticleItem {...articleItemProps} onFeedback={onFeedback} />\n\n      {!data.hasMore && index === data.list.length - 1 && (\n        <div className=\"list-no-more\">没有更多文章了</div>\n      )}\n    </div>\n  )\n}, areEqual)\n\n\n\n\n\nconst ArticleList = ({ channelId, activeId }) => {\n  const listRef = useRef()\n  const sizeMap = useRef({})\n\n  const setSize = useCallback((index, size) => {\n    if (sizeMap.current[index]) return\n    sizeMap.current = { ...sizeMap.current, [index]: size }\n    // https://github.com/bvaughn/react-window/issues/6#issuecomment-548897123\n    listRef.current.resetAfterIndex(index)\n  }, [])\n\n  const getSize = useCallback(index => {\n    return sizeMap.current[index] || 70\n  }, [])\n\n  // 这里 setRefreshing(false) 表示没有更多数据了   setRefreshing(true)表示有更多数据\n  const [refreshing, setRefreshing] = useState(false)    /* 表示一来没有在加载中 */\n\n  const [articles, setArticles] = useState({\n    list: [],\n    preTimestamp: +new Date()\n  })\n\n  const [hasMore, setHasMore] = useState(true)\n\n  useEffect(() => {\n    // 注意：useEffect中应该是同步的  如果是异步的 返回的是Promise  返回的就不是函数了  错误\n    // 清理副作用 是函数 不是Promise\n    const loadData = async () => {\n      const res = await http.get('/articles', {\n        params: {\n          channel_id: channelId,\n          timestamp: +new Date()\n        }\n      })\n\n      const { results, pre_timestamp } = res.data.data\n\n      setArticles({\n        list: results,\n        preTimestamp: pre_timestamp\n      })\n    }\n\n    // 保证只在组件第一次被“激活”并且 list 列表为空时，发送请求\n    // 激活：activeId === channelId\n    if (activeId === channelId && articles.list.length === 0) {\n      loadData()\n    }\n    // 如果在加载中，不允许重复加载    if(loading) return\n    // 如果不是当前的频道，也不需要加载  if(channelId !== activeId )  return\n    // 正在加载 setLoading(true)\n  }, [channelId, activeId, articles])\n\n  const loadMoreItems = (startIndex, stopIndex) => {\n    // 列表数据为空时，说明当前 tab 还没有被激活，此时，不需要加载数据\n    if (articles.list.length === 0) return Promise.resolve()\n \n    return new Promise(async resolve => {\n      const res = await http.get('/articles', {\n        params: {\n          channel_id: channelId,\n          timestamp: articles.preTimestamp\n        }\n      })\n\n      resolve()\n\n      const { results, pre_timestamp } = res.data.data\n\n      if (!pre_timestamp) {\n        setHasMore(false)\n      } else {\n        setArticles({\n          list: [...articles.list, ...results],\n          preTimestamp: pre_timestamp\n        })\n      }\n    })\n  }\n\n  const onPullToRefresh = async () => {\n    setRefreshing(true) /* 要加载 */\n    const res = await http.get('/articles', {\n      params: {\n        channel_id: channelId,\n        timestamp: +new Date()\n      }\n    })\n\n    const { results, pre_timestamp } = res.data.data\n    setArticles({\n      list: results,\n      preTimestamp: pre_timestamp\n    })\n\n    // 主动加载下一页数据\n    loadMoreItems()\n    setRefreshing(false)   \n  }\n\n  const isItemLoaded = index => {\n    return !!articles.list[index]\n  }\n\n  // const itemCount = hasMore ? articles.list.length + 1 : articles.list.length\n  const itemCount = hasMore ? articles.list.length + 1 : articles.list.length\n\n\n\n\n\n\n\n\n\n\n\n\n\n  return (\n    <div\n      className={styles.root}\n      style={{ display: activeId === channelId ? 'block' : 'none' }}  /* 点击哪个频道显示哪个频道的 盒子  其他隐藏 */\n    >\n      {/* 下拉刷新 */}\n      <PullToRefresh\n        damping={60}\n        refreshing={refreshing}\n        onRefresh={onPullToRefresh}\n      >\n        <div className=\"articles\">\n          {/* https://bvaughn.github.io/forward-js-2017/#/12/5 */}\n          <InfiniteLoader\n            isItemLoaded={isItemLoaded}\n            itemCount={itemCount}\n            loadMoreItems={loadMoreItems}\n          >\n            {({ onItemsRendered, ref }) => {\n              return (\n                <List\n                  height={(window.innerHeight - 90) * (window.innerWidth / 375)}\n                  itemCount={itemCount}\n                  itemSize={getSize}\n                  onItemsRendered={onItemsRendered}\n                  itemData={{\n                    list: articles.list,\n                    hasMore\n                  }}\n                  ref={list => {\n                    // https://github.com/bvaughn/react-window/issues/324#issuecomment-528887341\n                    if (list) {\n                      ref(list)\n                      listRef.current = list\n                    }\n                  }}\n                >\n                  {/* {Row} */}\n                  {props => <Row {...props} setSize={setSize} />}\n                </List>\n              )\n            }}\n          </InfiniteLoader>\n        </div>\n      </PullToRefresh>\n    </div>\n  )\n}\n\nexport default ArticleList\n","import Icon from '@/components/Icon'\nimport { addChannel, deleteChannel, getRecommendChannel } from '@/store/actions'\nimport { isAuth } from '@/utils'\nimport classnames from 'classnames'\nimport { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styles from './index.module.scss'\n\n\n\nconst Channels = ({ userChannles = [], tabActiveIndex, onClose, onChange, onChannelClick }) => {\n \n  const dispatch = useDispatch()\n  const channelsList = useSelector(state => state.home.recommendChannel)    //----  获取redux数据\n  const [isEdit, setIsEdit] = useState(false)\n\n  const isLogin = isAuth()\n\n  useEffect(() => {\n    if (channelsList.length === 0) {\n      dispatch(getRecommendChannel(userChannles))\n    }\n  }, [dispatch, userChannles, channelsList.length])\n\n  const onEdit = () => setIsEdit(!isEdit)\n\n  // 编辑时的删除图标\n  const onDeleteChannel = async data => {\n\n    // if(userChannles.length <= 4){\n    //   Toask.info('至少保留4个频道呦', 1)\n    //   return \n    // }\n    // console.log('删除的频道 iS', data)\n    const newTabs = userChannles.filter(item => item.id !== data.id)\n    onChange(newTabs)\n\n    // 删除频道\n    dispatch(deleteChannel(data, isLogin))\n\n\n\n    // 高亮处理  需要接收一个  i   在 onClick中也要传递 一个 i\n      // 1.如果删除的 i 和 index 相等,默认让推荐 0 高亮\n      // 2.如果删除的 i 小于 index, 默认让 i - 1 高亮\n      // 3.如果删除的 i 大于 index, 不用处理\n      // console.log('i', i)\n      // console.log('index', index)\n    // if(i < index) {\n    //   onChange(i - 1)\n    // }else if(i === index){\n    //   onChange(0)\n    // }else{\n    //   onChange(i)\n    // }\n\n\n\n  }\n\n  \n  // 添加频道\n  // 登录的就发请求去添加  ?  没有登录的添加到本地就可以\n  const onAddChannel = async data => {\n    const newTabs = [...userChannles, data]\n    onChange(newTabs)\n\n    // 添加频道\n    dispatch(addChannel(data, isLogin))\n  }\n\n  // 点击切换频道\n  const onChannelItemClick = index => {\n\n    setIsEdit(false)\n    onClose()\n    onChannelClick(index)\n  }\n\n\n\n\n\n\n\n\n  return (\n    <div className={styles.root}>\n      <div className=\"channel-header\">\n        <Icon type=\"iconbtn_channel_close\" onClick={onClose} />\n      </div>\n      <div className=\"channel-content\">\n        <div className={classnames('channel-item', isEdit ? 'edit' : '')}>\n          <div className=\"channel-item-header\">\n            <span className=\"channel-item-title\">我的频道</span>\n            <span className=\"channel-item-title-extra\">\n              点击{isEdit ? '删除' : '进入'}频道\n            </span>\n            <span className=\"channel-item-edit\" onClick={onEdit}>\n              {isEdit ? '保存' : '编辑'}\n            </span>\n          </div>\n          <div className=\"channel-list\">\n            {userChannles.map((item, index) => (\n              <span\n                key={item.id}\n                className={classnames(\n                  'channel-list-item',\n                  index === tabActiveIndex ? 'selected' : ''\n                )}\n                onClick={() => onChannelItemClick(index)}\n              >\n                {item.title}\n                {/* 这里控制 推荐频道不可删除 */}\n                {/* {item.id !== 0 && (<Icon> 下面的图标 </Icon>)} */}\n                <Icon\n                  type=\"iconbtn_tag_close\"\n                  onClick={e => {\n                    e.stopPropagation()\n\n                    onDeleteChannel(item)   ///传递 item 表示要删除哪个频道\n                  }}\n                />\n              </span>\n            ))}\n\n            {/* <span className=\"channel-list-item\">开发者资讯</span> */}\n          </div>\n        </div>\n\n        <div className=\"channel-item\">\n          <div className=\"channel-item-header\">\n            <span className=\"channel-item-title\">频道推荐</span>\n            <span className=\"channel-item-title-extra\">点击添加频道</span>\n            {/* <span className=\"channel-item-edit\">编辑</span> */}\n          </div>\n          <div className=\"channel-list\">\n            {channelsList.map(item => (\n              <span\n                key={item.id}\n                className=\"channel-list-item\"\n                onClick={() => onAddChannel(item)}\n              >\n                + {item.title}\n              </span>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Channels\n","import Icon from '@/components/Icon'\nimport { setMoreAction } from '@/store/actions'\nimport { Modal } from 'antd-mobile'\nimport { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styles from './index.module.scss'\n\n/** 组件是 举报的❌ 的渲染\n * 实现的功能：\n *  1.登录之后，主页频道，不感兴趣、反馈垃圾内容、拉黑作者 \n    2.点击反馈垃圾内容实现二级弹窗\n */\n\n// const list = [\n//   {id: 0, title: '其他问题'},\n//   {id: 1, title: '标题夸张'},\n//   {id: 2, title: '低俗色情'},\n//   {id: 3, title: '错别字多'},\n//   {id: 4, title: '就问重复'},\n//   {id: 5, title: '广告软文'},\n//   {id: 6, title: '内容部时'},\n//   {id: 7, title: '低速aa'},\n//   {id: 8, title: '侵权'},\n// ]\n\n// feedbackType: normal / junk\nconst MoreAction = () => {\n  const dispatch = useDispatch()\n  const { visible } = useSelector(state => state.home.moreAction)\n  // junk / normal\n  const [feedbackType, setFeedbackType] = useState('normal')\n\n  // 关闭弹窗时的事件监听函数\n  const onClose = () => {\n    dispatch(\n      setMoreAction({\n        id: 0,\n        visible: false\n      })\n    )\n  }\n\n  // 拉黑\n  // const unLike = async () => {\n  //   await dispatch(unLikeArticle(moreAction.articleId))\n  //   onClose()\n  //   Toast.info('拉黑成功')\n  // }\n\n  // const report = (id) => {\n  //   await dispatch(reportArticle(moreAction.articleId, id))\n  //     onClose()\n  //     Toast.info('举报成功')\n  // }\n\n\n  return (\n    <div className={styles.root}>\n      <Modal\n        title=\"\"\n        footer={[]}\n        transparent\n        maskClosable\n        visible={visible}\n        onClose={onClose}\n        className=\"more-action-modal\"\n      >\n        <div className=\"more-action\">\n          {feedbackType === 'normal' ? (\n            <>\n              <div className=\"action-item\">\n                <Icon type=\"iconicon_unenjoy1\" />\n                不感兴趣\n              </div>\n              <div\n                className=\"action-item\"\n                onClick={() => setFeedbackType('junk')}\n              >\n                <Icon type=\"iconicon_feedback1\" />\n                <span className=\"text\">反馈垃圾内容</span>\n                <Icon type=\"iconbtn_right\" />\n              </div>\n              <div className=\"action-item\">\n                <Icon type=\"iconicon_blacklist\" />\n                拉黑作者\n              </div>\n            </>\n          ) : (\n            <>\n              <div\n                className=\"action-item\"\n                onClick={() => setFeedbackType('normal')}\n              >\n                <Icon type=\"iconfanhui\" />\n                <span className=\"back-text\">反馈垃圾内容</span>\n              </div>\n\n              {/* {list.map((item)=>{\n                <div key={item.id} className=\"action-item\" on Click={()=> report(item.id)} >{item.title}</div>\n              })} */}\n\n              <div className=\"action-item\">旧闻重复</div>\n              <div className=\"action-item\">广告软文</div>\n              <div className=\"action-item\">内容不实</div>\n              <div className=\"action-item\">涉嫌违法</div>\n\n              <div className=\"action-item\">\n                <span className=\"text\">其他问题</span>\n                <Icon type=\"iconbtn_right\" />\n              </div>\n            </>\n          )}\n        </div>\n      </Modal>\n    </div>\n  )\n}\n\nexport default MoreAction\n","import Icon from '@/components/Icon'\nimport Tabs from '@/components/Tabs'\nimport { getUser, getUserChannel } from '@/store/actions'\nimport { isAuth } from '@/utils'\nimport { Drawer } from 'antd-mobile'\nimport { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport ArticleList from './components/ArticleList'\nimport Channels from './components/Channels'\nimport MoreAction from './components/MoreAction'\nimport styles from './index.module.scss'\n\nconst CHANNEL_KEY = 'itcast_channel_k'\n\n// rfc生成函数组件\nconst Home = ({ history }) => {\n  const dispatch = useDispatch()\n  const tabs = useSelector(state => state.home.userChannel)\n  const [tabActiveIndex, setTabActiveIndex] = useState(0)\n  const [open, setOpen] = useState(false)\n\n  // 获取 tabs 数据\n  useEffect(() => {\n    const loadData = async () => {\n      const isLogin = isAuth()\n\n      // 未登录\n      if (!isLogin) {\n        const localTabs = JSON.parse(localStorage.getItem(CHANNEL_KEY)) || []\n        // 本地缓存中有 tabs 数据\n        if (localTabs.length > 0) {\n          dispatch(getUser(localTabs))\n          return\n        }\n      }\n\n      // 1 已登录\n      // 2 未登录，本地缓存中也没有\n      dispatch(getUserChannel())\n    }\n\n    loadData()\n  }, [dispatch])\n\n  useEffect(() => {\n    if (tabs.length === 0) return\n\n    localStorage.setItem(CHANNEL_KEY, JSON.stringify(tabs))\n  }, [tabs])\n\n  // 关闭 channels\n  const onClose = () => setOpen(false)\n\n  // 修改 tabs\n  const onChangeTab = value => dispatch(getUser(value))\n\n\n\n\n\n\n  return (\n    <div className={styles.root}>\n\n      {/* 渲染 顶部Tab栏 频道组件 */}\n      <Tabs\n        index={tabActiveIndex}      /* index控制哪个频道高亮 */\n        tabs={tabs} \n        onChange={index => setTabActiveIndex(index)}    /* onChange 点击到哪个频道 */\n      >\n        {/* 渲染每个ArticleList都发请求了  只是要选择哪个频道 哪个频道去发请求就可以了 */}\n        {/* 传入的ArticleList属性中加一个 activeId={tabs[active].id}  拿到所有频道对应激活的id */}\n        {tabs.map(item => (\n          <ArticleList key={item.id} channelId={item.id} />  /* 传递 channelId */\n        ))}\n      </Tabs>\n\n      <div className=\"tabs-opration\">\n        <Icon type=\"iconbtn_search\" onClick={() => history.push('/search')} />\n        <Icon type=\"iconbtn_channel\" onClick={() => setOpen(true)} />    {/* 控制 Channels 组件 */}\n      </div>\n\n      <Drawer\n        className=\"my-drawer\"\n        style={{ minHeight: document.documentElement.clientHeight }}\n        sidebar={\n          // 如果 tab栏 频道有数据 渲染 Channels组件 否则 ''       一来不用渲染 如果有数据才渲染\n          tabs.length > 0 ? (\n            <Channels\n              tabActiveIndex={tabActiveIndex}\n              userChannles={tabs}\n              onClose={onClose}\n              onChange={onChangeTab}\n              onChannelClick={index => setTabActiveIndex(index)}\n            />\n          ) : (\n            ''\n          )\n        }\n        open={open}\n        onOpenChange={() => setOpen(false)}\n      >\n        {''}\n      </Drawer>\n\n      {/* more action */}\n      <MoreAction />\n    </div>\n  )\n}\n\n/*\n<div className=\"articles\">\n              <div className=\"article-item\">\n                <div className=\"article-content\">\n                  <h3>ES6时代，你真的会克隆对象吗？</h3>\n                  <div className=\"article-img-wrapper\">\n                    <img\n                      src=\"http://geek.itheima.net/resources/images/8.jpg\"\n                      alt=\"\"\n                    />\n                  </div>\n                </div>\n                <div className=\"article-info\">\n                  <span>黑马先锋</span>\n                  <span>0评论</span>\n                  <span>2 年内</span>\n                </div>\n              </div>\n\n              <div className=\"article-item\">\n                <div className=\"article-content none-mt\">\n                  <h3>ES6时代，你真的会克隆对象吗？</h3>\n                </div>\n                <div className=\"article-info none-mt\">\n                  <span>黑马先锋</span>\n                  <span>0评论</span>\n                  <span>2 年内</span>\n                </div>\n              </div>\n\n              <div className=\"article-item\">\n                <div className=\"article-content t3\">\n                  <h3>ES6时代，你真的会克隆对象吗？</h3>\n                  <div className=\"article-imgs\">\n                    <div className=\"article-img-wrapper\">\n                      <img\n                        src=\"http://geek.itheima.net/resources/images/8.jpg\"\n                        alt=\"\"\n                      />\n                    </div>\n                    <div className=\"article-img-wrapper\">\n                      <img\n                        src=\"http://geek.itheima.net/resources/images/8.jpg\"\n                        alt=\"\"\n                      />\n                    </div>\n                    <div className=\"article-img-wrapper\">\n                      <img\n                        src=\"http://geek.itheima.net/resources/images/8.jpg\"\n                        alt=\"\"\n                      />\n                    </div>\n                  </div>\n                </div>\n                <div className=\"article-info\">\n                  <span>黑马先锋</span>\n                  <span>0评论</span>\n                  <span>2 年内</span>\n                </div>\n              </div>\n            </div>\n*/\n\n// const Home = () => {\n//   // { id, name }\n//   const [tabs, setTabs] = useState([])\n\n//   useEffect(() => {\n//     const loadTabsData = async () => {\n//       const res = await http.get('/channels')\n//       console.log(res)\n\n//       const { channels } = res.data.data\n//       const newTabs = channels.map(item => ({ title: item.name }))\n//       setTabs(newTabs)\n//     }\n\n//     loadTabsData()\n//   }, [])\n\n//   const renderContent = () => {\n//     return <div>1</div>\n//   }\n\n//   return (\n//     <div className={styles.root}>\n//       <Tabs\n//         tabs={tabs}\n//         // animated={false}\n//         tabBarActiveTextColor=\"#333\"\n//         tabBarInactiveTextColor=\"#9EA1AE\"\n//         tabBarUnderlineStyle={{\n//           width: 30,\n//           marginLeft: 13.9,\n//           borderColor: '#fc6627'\n//         }}\n//         renderTab={tab => {\n//           return <span>{tab.title}</span>\n//         }}\n//       >\n//         {renderContent}\n//       </Tabs>\n//       <div className=\"tabs-opration\">\n//         <svg className=\"icon\" aria-hidden=\"true\">\n//           <use xlinkHref=\"#iconbtn_search\"></use>\n//         </svg>\n//         <svg className=\"icon\" aria-hidden=\"true\">\n//           <use xlinkHref=\"#iconbtn_channel\"></use>\n//         </svg>\n//       </div>\n//     </div>\n//   )\n// }\n\nexport default Home\n","import Icon from '@/components/Icon'\nimport { getProfile } from '@/store/actions'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link, useHistory } from 'react-router-dom'\nimport styles from './index.module.scss'\n\n\n\n/**\n * 功能实现：\n * 1.从redux中获取数据(useSelector)的使用 && 一进入页面就发请求获取数据(useEffect)的使用 \n * 2.Icon图标的封装\n * 3.在更多服务当中, 点击用户反馈和小智同学 跳转： onClick={() => history.push('/profile/feedback')}  &&  ('/profile/chat')\n * 4.封装小智, 用户反馈, 编辑个人资料 组件\n */\nconst Profile = () => {\n  const dispatch = useDispatch()\n  const profile = useSelector(state => state.profile.user)    //从redux获取数据\n  const history = useHistory()\n  // console.log('profile iS', profile)  //刷新获取用户信息\n \n  useEffect(() => {\n    dispatch(getProfile()) //------->  页面一进入 就需要发送请求  获取用户信息\n  }, [dispatch])\n\n  const { art_count, fans_count, follow_count, like_count, name, photo } =  profile\n\n  return (\n    <div className={styles.root}>\n      <div className=\"profile\">\n        <div className=\"user-info\">\n          <div className=\"avatar\">\n            <img src={photo} alt=\"头像\" />\n          </div>\n          <div className=\"user-name\">{name}</div>\n          \n          {/* 点击个人信息 跳转到编辑页面 */}\n          <Link to=\"/profile/edit\">\n            个人信息 <Icon type={`iconbtn_right`} />\n          </Link>\n        </div>\n\n        <div className=\"read-info\">\n          <Icon type=\"iconbtn_readingtime\" />\n          今日阅读\n          <span>66</span>\n          分钟\n        </div>\n\n        <div className=\"count-list\">\n          <div className=\"count-item\">\n            <p>{art_count}</p>\n            <p>动态</p>\n          </div>\n          <div className=\"count-item\">\n            <p>{follow_count}</p>\n            <p>关注</p>\n          </div>\n          <div className=\"count-item\">\n            <p>{fans_count}</p>\n            <p>粉丝</p>\n          </div>\n          <div className=\"count-item\">\n            <p>{like_count}</p>\n            <p>被赞</p>\n          </div>\n        </div>\n\n        <div className=\"user-links\">\n          <div className=\"link-item\">\n            <Icon type={`iconbtn_mymessages`} />\n            <div>消息通知</div>\n          </div>\n          <div className=\"link-item\">\n            <Icon type={`iconbtn_mycollect`} />\n            <div>收藏</div>\n          </div>\n          <div className=\"link-item\">\n            <Icon type=\"iconbtn_history1\" />\n            <div>浏览历史</div>\n          </div>\n          <div className=\"link-item\">\n            <Icon type=\"iconbtn_myworks\" />\n            <div>我的作品</div>\n          </div>\n        </div>\n      </div>\n      <div className=\"more-service\">\n        \n        \n        <h3>更多服务</h3>\n        <div className=\"service-list\">\n          <div\n            className=\"service-item\"\n            onClick={() => history.push('/profile/feedback')}\n          >\n            <Icon type=\"iconbtn_feedback\" />\n            <div>用户反馈</div>\n          </div>\n          <div\n            className=\"service-item\"\n            onClick={() => history.push('/profile/chat')}\n          >\n            <Icon type=\"iconbtn_xiaozhitongxue\" />\n            <div>小智同学</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Profile\n","import NavBar from '@/components/NavBar'\nimport styles from './index.module.scss'\n\nconst Question = () => {\n  return (\n    <div className={styles.root}>\n      <NavBar>问答</NavBar>\n\n      <div className=\"question-list\">\n        <div className=\"question-item\">\n          <div className=\"left\">\n            <h3>作为 IT 行业的过来人，你有什么话想对后辈说的？</h3>\n            <div className=\"info\">\n              <span>赞同 1000+</span>\n              <span>评论 500+</span>\n              <span>1小时前</span>\n            </div>\n          </div>\n          <div className=\"right\">\n            <img\n              src=\"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73\"\n              alt=\"\"\n            />\n          </div>\n        </div>\n        <div className=\"question-item\">\n          <div className=\"left\">\n            <h3>作为 IT 行业的过来人，你有什么话想对后辈说的？</h3>\n            <div className=\"info\">\n              <span>赞同 1000+</span>\n              <span>评论 500+</span>\n              <span>1小时前</span>\n            </div>\n          </div>\n          <div className=\"right\">\n            <img\n              src=\"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73\"\n              alt=\"\"\n            />\n          </div>\n        </div>\n        <div className=\"question-item\">\n          <div className=\"left\">\n            <h3>作为 IT 行业的过来人，你有什么话想对后辈说的？</h3>\n            <div className=\"info\">\n              <span>赞同 1000+</span>\n              <span>评论 500+</span>\n              <span>1小时前</span>\n            </div>\n          </div>\n          <div className=\"right\">\n            <img\n              src=\"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73\"\n              alt=\"\"\n            />\n          </div>\n        </div>\n        <div className=\"question-item\">\n          <div className=\"left\">\n            <h3>作为 IT 行业的过来人，你有什么话想对后辈说的？</h3>\n            <div className=\"info\">\n              <span>赞同 1000+</span>\n              <span>评论 500+</span>\n              <span>1小时前</span>\n            </div>\n          </div>\n          <div className=\"right\">\n            <img\n              src=\"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73\"\n              alt=\"\"\n            />\n          </div>\n        </div>\n        <div className=\"question-item\">\n          <div className=\"left\">\n            <h3>作为 IT 行业的过来人，你有什么话想对后辈说的？</h3>\n            <div className=\"info\">\n              <span>赞同 1000+</span>\n              <span>评论 500+</span>\n              <span>1小时前</span>\n            </div>\n          </div>\n          <div className=\"right\">\n            <img\n              src=\"https://pic1.zhimg.com/80/v2-8e77b2771314f674cccba5581560d333_xl.jpg?source=4e949a73\"\n              alt=\"\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Question\n","import NavBar from '@/components/NavBar'\nimport styles from './index.module.scss'\nimport axios from 'axios'\nimport { useState } from 'react'\n\nconst Video = () => {\n\n  const [list, setlist] = useState([ ]) \n\n  const onSend = async (e) => {\n    const response = await axios.get('http://192.168.2.8:5000/api/bytts')\n    console.log(response)\n    setlist( response.data.message )\n  }\n\n  return (\n    <div className={styles.root}>\n      <NavBar>视频</NavBar>\n\n      <div className=\"video-list\">\n        <div className=\"video-item\">\n          <h3 className=\"title\">\n            格力电器将继续发展手机业务，并将向全产业覆盖！\n          </h3>\n          <div className=\"play\">\n            {/* <video src=\"https://ips.ifeng.com/video19.ifeng.com/video09/2021/05/26/p6803231351488126976-102-8-161249.mp4?reqtype=tsl&vid=2c791e3b-444e-4578-83e3-f4808228ae3b&uid=0puFR4&from=v_Free&pver=vHTML5Player_v2.0.0&sver=&se=&cat=&ptype=&platform=pc&sourceType=h5&dt=1622096387396&gid=6a4poXmsep1E&sign=39f76885daca6503ebf90acbfffc1ff1&tm=1622096387396\"></video> */}\n          </div>\n          <span>1563次播放</span>\n        </div>\n\n        \n\n        <div className=\"video-item\">\n          <button onClick={onSend}>提交</button>\n        </div>\n\n        <div className=\"video-item\">\n          {\n            list.map( (item) => {\n              return(\n                <li key={item.id} value={item.age}>{item.uname}</li>\n              )\n            })\n          }\n        </div>\n\n      </div>\n    </div>\n  )\n}\n\nexport default Video\n","import { AuthRoute } from '@/components/AuthRoute'\nimport Icon from '@/components/Icon'\nimport { KeepAlive } from '@/components/KeepAlive'\nimport classnames from 'classnames'\nimport { Route, useHistory, useLocation } from 'react-router-dom'\nimport Home from '../Home'\nimport Profile from '../Profile'\nimport Question from '../Question'\nimport Video from '../Video'\nimport styles from './index.module.scss'\n\n/**\n * 功能实现：\n * 1.路由组件KeepAlive、AuthRoute、Route的使用  三种渲染方式 component/render/children   优先级: component > render > children  URL:https://blog.csdn.net/weixin_44809405/article/details/91393342\n *      第一种: component    第二种：KeepAlive中的childrend  第三种：AuthRoute中的render\n * 2.点击 底部组件： 图标高亮/字体高亮 & 控制图标和字体 选中\n *      渲染出数组的所有属性值, 根据pathname和数组中的to做判断 如果相等 就渲染出to对应的那个数组下标\n * 3.封装的 Icon 组件=====> 根据这个Icon可以看出组件如何封装?\n *      Icon组件中 Icon是变量名 其return返回了原结构 渲染<svg className aria-hidden > <use xlinkHref></use> </svg>\n */\n\n\nconst menus = [\n  { id: 1, title: '首页', to: '/home/index', icon: 'iconbtn_home' },\n  { id: 2, title: '问答', to: '/home/question', icon: 'iconbtn_qa' },\n  { id: 3, title: '视频', to: '/home/video', icon: 'iconbtn_video' },\n  { id: 4, title: '我的', to: '/home/profile', icon: 'iconbtn_mine' }\n]\n\nconst Layout = () => {\n  const history = useHistory()\n  const { pathname } = useLocation()///--------->   pathname: /home/question  |  /home/index  |  /home/profile  |   /home/video\n\n  /**\n   * 注意：\n   * 区域一：点击按钮切换显示内容的区域\n   * 配置二级路由, 只要用了路由懒加载， 配合 Suspense 一起使用\n   *  { 基本配置：  <Swithch>     <Route path=\"/home/video\" component={Video}>   </Route>  </Swithch> }\n   * Route组件：只要path匹配到了，component就会渲染\n   * 有些页面，就算path匹配到了 还需要登录了才能访问，否则跳转到登录页  \n   * router提供了更复杂的使用方式  router可以不提供component，提供render\n   * \n   */ \n  return (\n    <div className={styles.root}>\n      <KeepAlive alivePath=\"/home/index\" exact path=\"/home/index\" component={Home} />\n      <Route path=\"/home/question\" component={Question} />\n      <Route path=\"/home/video\" component={Video} />\n      <AuthRoute path=\"/home/profile\" component={Profile} />\n      {/* react-router 5.0中，route组件有三个支持组建渲染的属性  =====>component/render/children */}\n      {/* <Route path=\"/home/Profile\" component={Profile} />                      两种方式相等                                               */}\n      {/* <Route path=\"/home/Profile\" render={() => { <Profile></Profile>}} />    内联写法?  &&  嵌套组合写法? render=(props)  里面有三个参数  */} \n      {/* <Route path=\"/home/Profile\" children={ props => (<div className={props.match? \"active\": ''}><Link to=\"path\" />\t</div>) />        */}\n\n\n{/* 点击 底部组件 图标高亮 & 字体高亮 */}\n      <div className=\"tabbar\">\n        {\n          menus.map(item => {\n            const isSelected = item.to === pathname\n            // 测试 选中的图标和文字\n            // console.log('item iS', item)\n            // console.log('isSelected iS', isSelected)\n            // 遍历数组 返回的结构\n            return (\n              <div\n                key={item.id}\n                className={classnames('tabbar-item', isSelected ? 'tabbar-item-active' : '' )}   \n                onClick={() => history.push(item.to)}\n              >\n                {/* Icon组件中 Icon是变量名 其return返回了原结构 渲染<svg className aria-hidden > <use xlinkHref></use> </svg> */}\n                <Icon type={`${isSelected ? `${item.icon}_sel` : item.icon}`} />\n                <span>{item.title}</span>\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default Layout\n","import classnames from 'classnames'\nimport { useRef, useEffect } from 'react'\nimport styles from './index.module.scss'\n\n\n\nconst Input = ({type = 'text', value, autoFocus, onChange, name, className, placeholder, extra, onExtraClick, ...rest }) => {\n\n  // 受控组件\n  const inputRef = useRef()\n\n  useEffect(() => {\n    // console.log(autoFocus) //undefined\n    if(autoFocus) inputRef.current.focus()\n  }, [autoFocus]);\n\n  return (\n    <div className={classnames(styles.root, className)}>  {/* 合并className - 控制类名 */}\n      <input\n        ref={inputRef}\n        autoFocus  ///自动获取焦点\n        value={value}\n        name={name}\n        className=\"input\"\n        placeholder={placeholder}\n        type={type}\n        onChange={onChange}\n        {...rest}\n      />\n      {/* 如果传递extra属性就显示extra   否则就不显示 */}\n      {extra && ( <span className=\"extra\" onClick={onExtraClick}>{extra}</span> )}\n    </div>\n  )\n}\n\nexport default Input\n","import Input from '@/components/Input'\nimport NavBar from '@/components/NavBar'\nimport { login, sendSms } from '@/store/actions'\nimport { Toast } from 'antd-mobile'\nimport classnames from 'classnames'\nimport { useFormik } from 'formik'\nimport { useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport * as Yup from 'yup'\nimport styles from './index.module.scss'\n\n\n\n/**\n * 实现功能：\n * 1.在表单提交onSubmit中 debugger 打断点查看打印消息\n * 2.dispatch登录功能------>return dispatch -> http.get() 返回值存储到redux和localStorage中\n * 3.dispatch发送验证码\n * 4.formik的handleChange和handleSubmit事件\n * 5.短信验证码倒计时------->useState的使用---->验证码是否能被点击\n * 6.封装 Input 输入框  传递extra后获取验证码\n * 7.className的使用\n * 8.提交表单后腰跳转的路由地址(history)\n */\nconst Login = () => {\n  const history = useHistory()\n  const location = useLocation()\n  const dispatch = useDispatch()\n  const [time, setTime] = useState(0)\n\n  const formik = useFormik({\n    initialValues: {\n      mobile: '13900001111',\n      code: '246810'\n    },\n    // 表单验证\n    validationSchema: Yup.object().shape({\n      mobile: Yup.string()\n        .required('请输入手机号')\n        .matches(/^1[3456789]\\d{9}$/, '手机号格式错误'),\n      code: Yup.string()\n        .required('请输入验证码')\n        .matches(/^\\d{6}$/, '验证码6个数字')\n    }),\n    // 表单提交：\n    onSubmit: async values => {///--------->   {mobile: '13900001111', code: '246810'}  \n      // debugger;\n      await dispatch(login(values))\n      Toast.info('登录成功!', 1)\n\n      // const pathname = location.state ? location.state.from : '/home'\n      // history.go(-1): 页面后退\n      // history.go(1): 页面前进\n      // history.push(): 页面跳转，并且往页面栈中添加一条记录\n      // history.replace(): 页面跳转，但是不会添加一条记录，而是替换当前记录\n      \n      const { state } = location\n      if (!state) {\n        history.replace('/home/index')\n      } else {\n        // 跳转回要访问的页面\n        history.replace(state.from)\n      }\n    }\n  })\n\n\n  // 发送验证码\n  const onSendSms = async () => {\n    if(time > 0) return\n    const { mobile } = formik.values  //在这里是输入完手机号和验证码之后 获取formik的值  可以获取到\n    try {\n      // await 返回Promise对象的处理结果、如果等待不是Promise对象、则返回该值本身  --> 官网:MDN\n      await dispatch(sendSms(mobile))     //****  查看错误信息  -->    报错查看错误/网络/Response\n      // Toast.success('获取验证码成功', 1)\n      Toast.info('验证码发送成功!', 1)\n\n      // 获取验证码成功, 开启倒计时\n      setTime(60)\n      let timeId =  setInterval(()=> {\n        setTime( (time) => {\n          if(time === 1 ) { clearInterval(timeId) }\n          return time - 1 \n        })\n      },1000)\n    } catch (err){\n      // 保证response有值才行, 这里否则会直接访问 data.message\n      // if(err.response){Toast.fail(err.response.data.message, 1)}  \n      // else{Toast.fail('服务器繁忙,请重试')}\n      console.log(err.response.data.message)\n    }\n  }\n\n  // 返回上一页\n  const onLeftClick = () => history.go(-1)\n  const { errors, touched, values, isValid, handleChange, handleSubmit } = formik  //-------解构formik属性  ?  touched 触摸到输入框中\n\n\n  return (\n    <div className={styles.root}>\n      <NavBar onLeftClick={onLeftClick} />\n\n      <div className=\"content\">\n        <h3>短信登录</h3>\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"input-item\">\n            \n            {/* 封装 Input 输入框 */}\n            <Input\n              name=\"mobile\"\n              value={values.mobile}\n              onChange={handleChange}\n              placeholder=\"请输入手机号\"\n              // onBlur={hanleBlur}    onBlur事件：失去焦点触发\n              // autoComplete=\"off\"    \n            />\n\n            {errors.mobile && touched.mobile && (  <div className=\"validate\">{errors.mobile}</div>    )}\n          </div>\n          <div className=\"input-item\">\n            <Input\n              name=\"code\"\n              value={values.code}\n              onChange={handleChange}\n              placeholder=\"请输入验证码\"\n              extra={time === 0 ? '获取验证码' : time + 's后获取验证码' }\n              onExtraClick={onSendSms}\n              maxLength={6}\n            />\n            {errors.code && touched.code && (  <div className=\"validate\">{errors.code}</div>  )}\n          </div>\n\n          <button\n            type=\"submit\"\n            disabled={!isValid}\n            // 类名为 login-btn + disabled 不能被点击, 不能提交\n            className={classnames('login-btn', !isValid ? 'disabled' : '')}\n          >\n            登录\n          </button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default Login\n","import { useEffect, useRef, useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\n\n\n\n/**\n * 实现功能：\n * 1.useEffect的使用   ?秒后,返回首页\n * 2.通过timerRef.current演示函数组件闭包的问题  函数组件的内部变量和外部变量\n */\nconst NotFound = () => {\n  const [leftSecond, setLeftSecond] = useState(3)\n  const timerRef = useRef(-1)  //给空值 或者 -1\n  const history = useHistory()\n\n  // 第一种写法:\n  useEffect(() => {\n    // 原\n    // let timer = setInterval(()=> {\n    //   setTimeout((time) => {\n    //     if(time===1){\n    //       clearInterval(timer)\n    //       history.push('/home')\n    //     }\n    //     return time - 1\n    //   }, 1000);\n    // })\n    timerRef.current = setInterval(() => {\n      if (leftSecond <= 1) {\n        return history.push('/home')\n      }\n      setLeftSecond(leftSecond - 1)\n    }, 1000)\n\n    // 清理副作用\n    return () => clearInterval(timerRef.current)\n  }, [leftSecond, history])\n\n  // 第二种写法：\n  // useEffect(() => {\n  //   let timer = setTimeout(() => {\n  //     setTime(time -1)\n  //   },1000)\n  //   return = () => {\n  //     clearInterval(timer)\n  //   }\n  // })\n  // useEffect(() => {\n  //   if(time === 0){\n  //     history.push('/home')\n  //   }\n  // }, [ time, history ])\n\n  return (\n    <div>\n      <h1>对不起，你访问的内容不存在...</h1>\n      <p>\n        {leftSecond} 秒后，返回<Link to=\"/home\">首页</Link>\n      </p>\n    </div>\n  )\n}\n\nexport default NotFound\n","import Icon from '@/components/Icon'\nimport Input from '@/components/Input'\nimport NavBar from '@/components/NavBar'\nimport { getTokens } from '@/utils'\nimport { Toast } from 'antd-mobile'\nimport classnames from 'classnames'\nimport { useEffect, useRef, useState } from 'react'\nimport { useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport io from 'socket.io-client'\nimport styles from './index.module.scss'\n// let client = null;  这里是全局 client 而在函数组件内部属于闭包  内部调用会访问不到\n\n\n\n/**\n功能实现：\n静态结构==>\n * 1.NavBar的封装(小智同学)\n * 2.聊天消息的显示控制类：回车给服务端发送消息--> 把自己的消息添加到消息列表中--> 控制台网络查看发送的消息--> 接收服务端消息显示到页面当中\n * 3.聊天消息的list获取方式 & list的遍历聊天结构\n * 4.底部Input组件的封装和使用   ?如何变成受控组件\n代码结构==>\n * 5.useEffect的使用  清理副作用是组件销毁做的事  ?比如连接socketio 清理副作用是关闭socketio的连接\n * 6.Input输入框中有三个属性变量：Value, onChange, onKeyDown\n * 7.useState中[value, setValue]的使用  输入框中通过使用useState变成受控组件  .  setValue的使用\n * 8.useState中[list,  setList ]的使用  消息的存储Hooks中  通过Hooks控制新增消息和设置新消息\n * 9.useSelector从redux中获取axios请求的数据存储到redux中\n * 10.useRef来控制连接的变量socketio和socketIO.current的绑定   emit发送消息使用useRef来控制\n * 11.两个useEffect和两个useState的使用--> 如何正确使用Hooks?\n * 12.useEffect使用简介: https://www.jianshu.com/p/a619861445d0\n * 13.useState和useEffect的参数作用: http://ourjs.com/detail/kbbgiz4hwsih\n * 14.useRef的使用???\n */\nconst Chat = () => {\n  const history = useHistory()\n  \n  const profile = useSelector(state => state.profile.user)// 从redux获取头像图片\n  const [value, setValue] = useState([ ])\n  // 放两条初始消息--消息的存储 --> list表示所有的消息--> setList表示新添加消息--> useState表示初始消息\n  const [list, setList] = useState([\n    { name: 'xz', msg: '亲爱的用户您好，小智同学为您服务。' },\n    { name: 'self', msg: '你好小智同学!' }\n  ])\n  const socketIO = useRef(null)  ///-----把 useEffect 中的 client 暴露出来 并用 useRef 绑定到 socketIO\n  const chatListRef = useRef(null)\n\n  // 和发请求一样, socketio连接, 连接一次就好  && 使用完清理副作用(关闭连接)\n  useEffect(() => {\n    // dispatch(getUser())//-------这里需要加个请求 防止页面刷新 头像丢失  \n\n    const socketio = io('http://toutiao.itheima.net', {\n      query: {\n        token: getTokens().token\n      },\n      transports: ['websocket']\n    })\n    socketio.on('connect', () => {\n      setList(list => [\n        ...list,\n        { name: 'xz', msg: 'Hello!' }\n      ])\n      Toast.info('连接服务器成功， 开始聊天吧!', 0.5)\n    })\n    \n    socketio.on('message', data => {\n      setList(list => [\n        ...list, \n        { name: 'xz', msg: data.msg }\n      ])\n    })\n \n    socketIO.current = socketio\n\n    // !!!\n    // 清除副作用\n    // 组件销毁的时候 关闭socketio的连接\n    return () => socketio.close()\n  }, [])   //--------------------------这里空数组 只要执行一次就够了\n\n\n  useEffect(() => {\n    // chatListRef.current.scrollTop = chatListRef.current.scrollHeight\n    chatListRef.current.scrollTop = chatListRef.current.scrollHeight - chatListRef.current.offsetHeight   \n  }, [list]) //---->监听list的变化,,,如果list变化 那么就更新 滚动\n\n\n  // 底部输入框变成受控组件  实现功能:  1.需要给服务器发消息    2.把自己的消息添加到消息列表中\n  const onSend = e => {\n    // 测试键盘事件和useState的Value值\n    // console.log('value iS', value)  // value是每次在输入框输入的值\n    // console.log('e iS', e) // e是键盘事件 & 每一次键盘按键触发都会出发 onKeyDown事件\n    if (!value) return\n    if (e.keyCode === 13) {\n      socketIO.current.emit('message', { \n        msg: value, \n        timestamp: Date.now()\n       })\n      // console.log(...list)///--------->   其中 ...list表示之前的消息  在setList数组中添加的消息为 原来的消息和新消息的存储\n      setList([\n        ...list, \n        { name: 'self', msg: value }\n      ])\n      setValue('') ///---输入完消息回车后 清除输入框的消息\n    }\n  }\n\n\n\n\n  return (\n    <div className={styles.root}>\n      <NavBar className=\"fixed-header\" onLeftClick={() => history.go(-1)}>小智同学</NavBar>\n\n      {/* 发送的消息 类名为 self ? user  是自己的消息还是小智的消息 并展示 */}\n      <div className=\"chat-list\" ref={chatListRef}>\n        {/* 基本结构为\n            <div className='chat-item'> \n              <Icon type='iconbtn_xiaozhitongxue' />\n              <div className='message'>你好!</div>\n            </div>\n       */}\n        {\n          // item: {name: 'xz', msg: '欢迎您和小智聊天'} | {name: 'self', msg: '你好小智同学!'}   index: 0, 1, 2, 3, 4, 5\n          list.map((item, index) => (\n            // 返回的结构是一个div 其div中判断要显示的内容 是小智还是自己的消息 显示到对应的地方中\n            <div\n              className={classnames( 'chat-item', item.name === 'self' ? 'user' : '' )}\n              key={index}\n            >\n              {\n                item.name === 'self' ? \n                (<img src={ profile.photo || 'http://toutiao.itheima.net/images/user_head.jpg' } alt=\"\" />) : (<Icon type=\"iconbtn_xiaozhitongxue\" />)\n              }\n              <div className=\"message\">{item.msg}</div>\n            </div>\n          ))\n        }\n      </div>\n\n{/* 底部消息输入框 */}\n      <div className=\"input-footer\">\n        <Input\n          className=\"no-border\"\n          placeholder=\"请描述您的问题\"\n          onKeyDown={onSend}\n          value={value}\n          onChange={e => setValue(e.target.value)}\n        />\n        <Icon type=\"iconbianji\" />\n      </div>\n    </div>\n  )\n}\n\nexport default Chat\n","import { useState } from 'react'\nimport classnames from 'classnames'\nimport styles from './index.module.scss'\nimport { useRef, useEffect } from 'react'\n\nconst Textarea = ({ className, value, onChange, placeholder, maxLength = 100 }) => {\n  const [count, setCount] = useState(value.length || 0)\n\n  const onValueChange = e => {\n    onChange(e)\n    // onChange && onChange(e)\n    setCount(e.target.value.length)\n  }\n\n  const textRef = useRef(null)\n  useEffect(() => {\n    textRef.current.focus()\n    textRef.current.setSelectionRange(-1, -1)   //光标位置在最后\n  }, []);\n\n\n\n  return (\n    <div className={classnames(styles.root, className)}>   {/* 控制className的类 */}\n      <textarea\n        ref={textRef}\n        className=\"textarea\"\n        value={value}\n        onChange={onValueChange}\n        maxLength={maxLength}\n        placeholder={placeholder}\n      />\n\n      <div className=\"count\">\n        {count}/{maxLength}\n      </div>\n    </div>\n  )\n}\n\nexport default Textarea ","import Input from '@/components/Input'\nimport NavBar from '@/components/NavBar'\nimport Textarea from '@/components/Textarea'\nimport { useState } from 'react'\nimport styles from './index.module.scss'\n// import { useSelector } from 'react-redux'\n\n\nconst EditInput = ({ config, onClose, onCommit }) => {\n  // 获取编辑用户的数据\n  // const defaultValue = useSelector(state => { \n  //   console.log(state.profile.profile[type])\n  //   return state.profile.profile[type]\n  //  })\n\n  // const config = openInput.type === 'name' ? {title:'昵称',type:'name',value:userInfo.name}: { title:'简介',type:'intro',value:userInfo.intro }\n\n  const [value, setValue] = useState(config.value || '')\n\n  const { title, type } = config\n\n  const onValueChange = e => {\n    setValue(e.target.value)\n  }\n\n  return (\n    <div className={styles.root}>\n      <NavBar\n        className=\"navbar\"\n        onLeftClick={onClose}\n        rightContent={\n          <span className=\"commit-btn\" onClick={() => onCommit(type, value)}>\n            提交\n          </span>\n        }\n      >\n        编辑{title}\n      </NavBar>\n\n\n      <div className=\"content\">\n        <h3>{title}</h3>\n        {/* 329-个人中心-回显了昵称或简介 */}\n        {\n          type === 'name' ? (\n            <div className=\"input-wrap\">\n              <Input value={value} onChange={onValueChange} autoFocus />\n            </div>\n          ) : (\n            <Textarea\n              placeholder=\"请输入\"\n              value={value}\n              onChange={onValueChange}\n            />\n          )\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default EditInput\n","import styles from './index.module.scss'\n\n\n\n/**头像和性别  性别：男,女,取消   头像:拍照,本地,取消   在封装的组件中 返回结构   */\nconst EditList = ({ config, onClose }) => {\n  return (\n    <div className={styles.root}>\n      {\n        config.map((item, index) => (\n          <div key={index} className=\"list-item\" onClick={item.onClick}>\n            {item.title}\n          </div>\n        ))\n      }\n\n      <div className=\"list-item\" onClick={onClose}>\n        取消\n      </div>\n    </div>\n  )\n}\n\nexport default EditList","import NavBar from '@/components/NavBar'\nimport {  getUserProfile,  logout, updateAvatar, updateProfile } from '@/store/actions'\nimport { DatePicker, Drawer, List, Modal, Toast } from 'antd-mobile'\nimport classnames from 'classnames'\nimport { useEffect, useRef, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport EditInput from './components/EditInput'\nimport EditList from './components/EditList'\nimport styles from './index.module.scss'\n\nconst Item = List.Item\nconst alert = Modal.alert\n\n\n/**\n * 功能实现：\n路由跳转到编辑页面==>\n * 1.在Edit->indexjs中点击 <Link to=\"/profile/edit\">个人编辑</Link>    根据路由地址跳转到新页面(参考跳转方式...)   &&  用好history方法\n静态结构==>\n * 2.List->Item组件的使用 和 抽屉组件的使用 和 静态页面的布局\n * 3.Item组件是渲染静态结构的    昵称 | User | >    比如DatePicker组件中嵌套Item组件的使用\n * 4.antd-mobile组件的使用方式(参考....)\n * 5.项目中antd-mobile用的是v2版本   v5版本没有抽屉组件\n * 6.全屏抽屉组件和列表抽屉组件封装的EditList、EditInput\n代码结构==>\n * 7.点击Item: setOpenList({ visible: true, type: 'avatar' })  如何使用?\n * 8.抽屉组件封装的EditList、EditInput组件的方法的调用方式\n * 9.更新头像/上传图片实现方法--> 1.事件函数获取文件 2.FormData上传图片 3.dispatch发请求更新头像 4.存储到redux  5.setOpenList为false\n * 10.修改生日--> 1.onChange回调函数中获取date 2.通过dispatch发请求更新生日  3.返回值存储到redux中 4.通过useSelector获取数据\n * 11.头像、性别 封装在 EditList 组件\n * 12.昵称、简介 封装在 EditInput 组件\n * 13.EditInput组件中 引入封装的 Input、NavBar、Textarea\n */\nconst ProfileEdit = () => {\n  const dispatch = useDispatch()\n\n  // 获取redux中profile数据\n  const userInfo = useSelector(state => state.profile.userProfile)\n  // console.log('userInfo iS', userInfo) \n  const history = useHistory()\n  const fileRef = useRef() //---> 通过useRef控制 input输入框上传图片功能\n\n  // 控制全屏抽屉的显示与隐藏\n  const [openInput, setOpenInput] = useState({\n    visible: false,\n    type: 'input'\n  })\n  // 控制列表抽屉的显示与隐藏\n  const [openList, setOpenList] = useState({\n    visible: false,\n    type: 'gender'\n  })\n\n  // 表示每次更新数据 都会获取用户个人信息资料\n  useEffect(() => {\n    dispatch(getUserProfile())///--------->获取用户个人资料信息: birthday, gender, id, intro, name, mobile, photo\n  }, [dispatch])\n\n  /**注释：关闭输入框组件-->setOpenInput为false  */\n  const onCloseOpenInput = () => {\n    setOpenInput({\n      visible: false,\n      type: ''\n    })\n  }\n  /**注释：关闭列表组件-->setOpenList为false  */\n  const onCloseOpenList = () => {\n    setOpenList({\n      visible: false,\n      type: ''\n    })\n  }\n\n  // 列表抽屉组件: 头像、性别配置\n  const openListConfig = openList.type === 'avatar' ? \n              [{ title: '拍照', onClick: () => { fileRef.current.click() } },\n              { title: '本地选择', onClick: () => {fileRef.current.click()} }] \n              : \n              [{ title: '男', onClick: () => { dispatch(updateProfile('gender', 0)); setOpenList({ visible: false, type: ''})  }},\n              {title: '女', onClick: async () => { await dispatch(updateProfile('gender', 1)); setOpenList({ visible: false, type: ''})  }}]\n\n\n  // 全屏抽屉组件: 昵称、简介配置\n  const openInputConfig = openInput.type === 'name' ? {title:'昵称',type:'name',value:userInfo.name}: { title:'简介',type:'intro',value:userInfo.intro }\n      \n\n  /**注释：更新头像/上传图片实现方法--> 1.事件函数获取文件 2.FormData上传图片 3.dispatch发请求更新头像 4.存储到redux  5.setOpenList为false */\n  const onUpdateAvatar = e => {\n    const avatar = e.target.files[0]\n    const formData = new FormData()\n    formData.append('photo', avatar)\n\n    dispatch(updateAvatar(formData))\n    Toast.success('更新头像成功', 1)\n\n    setOpenList({\n      visible: false,\n      type: ''\n    })\n  }\n\n  /**注释：修改生日--> 1.onChange回调函数中获取date 2.通过dispatch发请求更新生日  3.返回值存储到redux中 4.通过useSelector获取数据 */\n  const onBirthdayChange = value => {\n    const date = `${value.getFullYear()}-${ value.getMonth() + 1  }-${value.getDate()}`\n    dispatch(updateProfile('birthday', date))\n  }\n\n  /**注释：修改昵称或简介--> 1.通过封装的EditInput组件中 回调函数拿到值 2.dispatch 3.存储到redux 4.useSelector获取数据 5.setOpenInput为false  */\n  const onCommit = (name, value) => {\n    dispatch(updateProfile(name, value))\n    setOpenInput({  visible: false, type: '' })\n  }\n\n\n  /**注释：退出功能实现方法--> 1.显示弹窗 2.删除token(包括redux和本地) 3.跳转到登录页 */\n  const onLogout = () => {\n    // Modal.alert('温馨提示', '你确定要退出吗', [ {'取消'}, {'确认'} ])   第三个参数是 数组\n    // 步骤：1.显示弹窗 2.删除token(包括redux和本地) 3.跳转到登录页\n    alert('温馨提示', '你确定退出吗？', [\n      {\n        text: '取消'\n      },\n      {\n        style: { color: '#FC6627' },\n        text: '确认',\n        onPress: () => {\n          dispatch(logout())\n          history.replace('/login'); \n          Toast.info('退出登录成功!', 1)\n        }\n      }\n    ])\n    \n  }\n\n\n\n\n\n\n  // 渲染页面\n  \n  return (\n    <div className={styles.root}>\n      <div className=\"content\">\n        <NavBar onLeftClick={() => history.go(-1)}>个人信息</NavBar>\n\n{/* List.Item的使用: https://mobile.ant.design/zh/components/list */}\n        <div className=\"wrapper\">\n          <List className=\"profile-list\">\n{/* List.Item组件是渲染静态结构的 */}\n            <Item\n              arrow=\"horizontal\"  //----> 说明: 最右侧是否显示箭头图标   属性horizontal表示 头像右侧的  >\n              // 列表项右侧区域  \tReactNode\n              extra={\n                <span className=\"avatar-wrapper\">\n                  <img src={userInfo.photo} alt=\"\" />\n                </span>         \n              }\n              onClick={() => setOpenList({ visible: true, type: 'avatar' }) }\n            >\n              头像\n            </Item>\n            {/* -------------------------------------------------------------- */}\n            <Item\n              arrow=\"horizontal\"\n              extra={userInfo.name}\n              onClick={() => setOpenInput({ visible: true, type: 'name' }) }\n            >\n              昵称\n            </Item>\n            {/* -------------------------------------------------------------- */}\n            <Item\n              arrow=\"horizontal\"\n              extra={\n                <span className={classnames('intro', userInfo.intro ? 'normal' : '')} >\n                  {userInfo.intro || '未填写'}\n                </span>\n              }\n              onClick={() => setOpenInput({ visible: true, type: 'intro' })}\n            >\n              简介\n            </Item>\n          </List>\n\n\n          <List className=\"profile-list\">\n            <Item\n              arrow=\"horizontal\"\n              extra={userInfo.gender === 0 ? '男' : '女'}\n              onClick={() =>setOpenList({visible: true, type: 'gender'})} \n            >\n              性别\n            </Item>\n\n{/* DatePicker参数与官网不太一致: https://antd-mobile-v2.surge.sh/components/date-picker-cn/    V2版本 */}\n            <DatePicker\n              mode=\"date\"\n              value={new Date(userInfo.birthday)}\n              title=\"选择 年/月/日\"\n              minDate={new Date(1900, 1, 1, 0, 0, 0)}\n              maxDate={new Date()}\n              onChange={onBirthdayChange}//onChange中获取date、通过dispatch发请求更新生日  返回值存储到redux中\n            >\n              <Item arrow=\"horizontal\" extra={userInfo.birthday}>\n                生日\n              </Item>\n            </DatePicker>\n          </List>\n\n          <input type=\"file\" hidden ref={fileRef} onChange={onUpdateAvatar} />  {/* ------------------上传图片/更新头像 */}\n        </div>\n\n        <div className=\"logout\">\n          <button className=\"btn\" onClick={onLogout}>\n            退出登录\n          </button>\n        </div>\n      </div>\n      \n\n      {/* 全屏表单抽屉的使用： https://antd-mobile-v2.surge.sh/components/drawer-cn/  */}\n      {/* 全屏抽屉组件------昵称、简介 */}\n      <Drawer\n        className=\"drawer\"\n        position=\"right\"//抽屉所在位置\n        style={{ minHeight: document.documentElement.clientHeight }}\n        sidebar={//抽屉里的内容\n          openInput.visible && (\n            <EditInput\n              config={openInputConfig}\n              onClose={onCloseOpenInput}\n              onCommit={onCommit}                                 //编辑信息 提交  传递给子组件 发请求 更新  参数为 type和value\n            />\n          )\n        }\n        open={openInput.visible}//开关状态 | boolean\n        onOpenChange={onCloseOpenInput}//open 状态切换时调用  设置setOpenInput为false | open状态为关\n      >\n        {''}\n      </Drawer>\n\n\n      {/* 列表抽屉组件-----头像、性别、生日 */}\n      <Drawer\n        className=\"drawer-list\"\n        position=\"bottom\"\n        sidebar={<EditList config={openListConfig} onClose={onCloseOpenList} />}\n        open={openList.visible}\n        onOpenChange={onCloseOpenList} \n      >\n        {''}\n      </Drawer>\n    </div>\n  )\n}\n\nexport default ProfileEdit","import NavBar from '@/components/NavBar'\nimport { ImagePicker, InputItem } from 'antd-mobile'\nimport { useHistory } from 'react-router-dom'\nimport styles from './index.module.scss'\n\n\n/**\n * 功能实现： \n * 1.静态资源渲染    \n * 2.NavBar的封装\n */\nconst FeedBack = () => {\n  const history = useHistory()\n\n  return (\n    <div className={styles.root}>\n      <NavBar onLeftClick={() => history.go(-1)}>意见反馈</NavBar>\n\n      <div className=\"wrapper\">\n        <div className=\"feedback-item\">\n          <p className=\"title\">简介</p>\n          <div className=\"textarea-wrap\">\n            <textarea className=\"textarea\" placeholder=\"请输入\"></textarea>\n            <div className=\"count\">0/100</div>\n          </div>\n          <ImagePicker files={[]} multiple />\n          <p className=\"image-picker-desc\">最多6张, 单个图片不超过20M。</p>\n        </div>\n\n        <div className=\"feedback-item\">\n          <p className=\"title\">联系方式</p>\n          <InputItem placeholder=\"请输入手机号码便于联系（非必填）\" />\n        </div>\n\n        <div className=\"feedback-item feedback-submit\">\n          <button>提交反馈</button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FeedBack\n","import Icon from '@/components/Icon'\nimport NavBar from '@/components/NavBar'\nimport { clearSuggestion, getSuggestion } from '@/store/actions'\nimport classnames from 'classnames'\nimport debounce from 'lodash/debounce'\nimport { useMemo, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styles from './index.module.scss'\n\nconst Search = ({ history }) => {\n  const dispatch = useDispatch()\n  const suggestList = useSelector(state => state.search.suggest)\n  const [searchValue, setSearchValue] = useState('')\n  const [isSearching, setIsSearching] = useState(false)\n\n  const showSuggest = useMemo(\n    () => debounce(value => dispatch(getSuggestion(value)), 500),\n    [dispatch]\n  )\n\n  const onSearchChange = e => {\n    const value = e.target.value\n    setSearchValue(value)\n\n    if (value.trim()) {\n      setIsSearching(true)\n      showSuggest(value)\n    } else {\n      setIsSearching(false)\n    }\n  }\n\n  const onClear = () => {\n    setSearchValue('')\n    setIsSearching(false)\n    dispatch(clearSuggestion())\n  }\n\n  const onGoToDetail = (value = searchValue) =>\n    history.push(`/search/result?q=${value}`)\n\n  return (\n    <div className={styles.root}>\n      <NavBar\n        className=\"navbar\"\n        onLeftClick={() => history.go(-1)}\n        rightContent={\n          <span className=\"search-text\" onClick={() => onGoToDetail()}>\n            搜索\n          </span>\n        }\n      >\n        <div className=\"navbar-search\">\n          <Icon type=\"iconbtn_search\" className=\"icon-search\" />\n          <div className=\"input-wrapper\">\n            <input\n              type=\"text\"\n              placeholder=\"请输入关键字搜索\"\n              value={searchValue}\n              onChange={onSearchChange}\n            />\n            {searchValue && (\n              <Icon\n                type=\"iconbtn_tag_close\"\n                className=\"icon-close\"\n                onClick={onClear}\n              />\n            )}\n          </div>\n        </div>\n      </NavBar>\n      {/* <div className=\"navbar\">\n        <div className=\"navbar-left\">\n          <Icon type=\"iconfanhui\" />\n        </div>\n        \n        </div>\n        <div className=\"navbar-right\">\n          <span>搜索</span>\n        </div>\n      </div> */}\n\n      <div\n        className=\"history\"\n        style={{ display: isSearching ? 'none' : 'block' }}\n      >\n        <div className=\"history-header\">\n          <span>搜索历史</span>\n          <span>\n            <Icon type=\"iconbtn_del\" />\n            清除全部\n          </span>\n        </div>\n\n        <div className=\"history-list\">\n          <span className=\"history-item\">\n            Python生成九宫格图片<span className=\"divider\"></span>\n          </span>\n          <span className=\"history-item\">\n            Python<span className=\"divider\"></span>\n          </span>\n          <span className=\"history-item\">\n            CSS<span className=\"divider\"></span>\n          </span>\n          <span className=\"history-item\">\n            数据分析<span className=\"divider\"></span>\n          </span>\n        </div>\n      </div>\n\n      <div\n        className={classnames('search-result', isSearching ? 'show' : false)}\n      >\n        {suggestList.map((item, index) => (\n          <div\n            key={index}\n            className=\"result-item\"\n            onClick={() => onGoToDetail(`${item.suggest}${item.rest}`)}\n          >\n            <Icon className=\"icon-search\" type=\"iconbtn_search\" />\n            <div className=\"result-value\">\n              <span>{item.suggest}</span>\n              {` ${item.rest}`}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default Search\n","import { http } from '@/utils'\n\n// 获取输入建议列表\nconst setSuggetionList = list => ({ type: 'search/suggetion', payload: list })\n\n// 清空搜索建议\nconst clear = () => ({ type: 'search/clear' })\n\n// 获取搜索文章列表\nconst setSearchList = list => ({ type: 'search/list', payload: list })\n\n/**\n * 获取输入联想建议列表\n * @param {string} q 查询内容\n * @returns thunk\n */\nconst getSuggestion = q => {\n  return async dispatch => {\n    const res = await http.get('/suggestion', {\n      params: {\n        q\n      }\n    })\n\n    const { options } = res.data.data\n    const suggestionList = options.map(item => {\n      const [suggest, rest = ''] = item.split(' ')\n      return {\n        suggest,\n        rest\n      }\n    })\n    dispatch(setSuggetionList(suggestionList))\n  }\n}\n\n/**\n * 清空建联想议列表\n * @returns thunk\n */\nconst clearSuggestion = () => {\n  return dispatch => {\n    dispatch(clear())\n  }\n}\n\n/**\n * 获取搜索文章列表\n * @param {string} q 查询内容\n * @returns thunk\n */\nconst getSearchList = q => {\n  return async dispatch => {\n    try {\n      const res = await http.get('/search', {\n        params: {\n          q\n        }\n      })\n\n      dispatch(setSearchList(res.data.data))\n    } catch {}\n  }\n}\n\nexport { getSuggestion, clearSuggestion, getSearchList }\n","import ArticleItem from '@/components/ArticleItem'\nimport NavBar from '@/components/NavBar'\nimport { getSearchList } from '@/store/actions'\nimport { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport styles from './index.module.scss'\n\nconst Result = () => {\n  const location = useLocation()\n  const history = useHistory()\n  const dispatch = useDispatch()\n  const articles = useSelector(state => state.search.searchList)\n  const params = new URLSearchParams(location.search)\n  const q = params.get('q')\n\n  useEffect(() => {\n    dispatch(getSearchList(q))\n  }, [q, dispatch])\n\n  const onToAritcleDetail = art_id => {\n    history.push(`/article/${art_id}`)\n  }\n\n  // const { page, per_page, results, total_count } = articles\n  const { results } = articles\n\n  return (\n    <div className={styles.root}>\n      <NavBar onLeftClick={() => history.go(-1)}>搜索结果</NavBar>\n      <div className=\"article-list\">\n        {results?.map(item => {\n          const {\n            aut_name,\n            comm_count,\n            pubdate,\n            title,\n            art_id,\n            cover: { type, images }\n          } = item\n\n          const articleItemProps = {\n            type,\n            title,\n            aut_name,\n            comm_count,\n            pubdate,\n            images\n          }\n\n          return (\n            <div key={art_id} onClick={() => onToAritcleDetail(art_id)}>\n              <ArticleItem key={item.art_id} {...articleItemProps} />\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default Result\n","import { AuthRoute } from '@/components/AuthRoute'\nimport { KeepAlive } from '@/components/KeepAlive'\nimport { history } from '@/utils'\nimport { Redirect, Route, Router, Switch } from 'react-router-dom'\nimport Article from './pages/Article'\nimport Layout from './pages/Layout'\nimport Login from './pages/Login'\nimport NotFound from './pages/NotFound'\nimport Chat from './pages/Profile/Chat'\nimport ProfileEdit from './pages/Profile/Edit'\nimport ProfileFeedback from './pages/Profile/Feedback'\nimport Search from './pages/Search'\nimport SearchResult from './pages/Search/Result'\n\n\n\nfunction App() { //创建函数组件 rfc\n  return (\n    <Router history={history}>\n      {/* 注意：与 Switch 不兼容 */}\n      <KeepAlive alivePath=\"/home\" path=\"/home\" exact component={Layout} />\n\n      <Switch>\n        <Route exact path=\"/\" render={() => <Redirect to=\"/home/index\" />} />\n        <Route exact path=\"/home\" render={() => <Redirect to=\"/home/index\" />} />\n\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/search\" component={Search} />\n        <Route path=\"/article/:id\" component={Article} />\n        <Route path=\"/search/result\" component={SearchResult} />\n\n        <AuthRoute path=\"/profile/edit\" component={ProfileEdit} />\n        <AuthRoute path=\"/profile/feedback\" component={ProfileFeedback} />\n        <AuthRoute path=\"/profile/chat\" component={Chat} />\n\n        {/* <Route path=\"*\" component={NotFound} /> */}\n        {/* 注意：因为 /home 不在 Switch 内部，所以，需要手动处理 /home 开头的路由，否则，会被当做 404 处理 */}\n        <Route path=\"*\" render={props => {\n          if (props.location.pathname.startsWith('/home')) {\n            return null\n          }\n          return <NotFound {...props} />\n        }} />\n      </Switch>\n    </Router>\n\n    // 这里是284-配置项目路由\n    // <Router>\n    //   <div className='app'>\n    //     <Link to=\"/login\">登录</Link>\n    //     <Link to=\"/home\">首页</Link>\n    //       <Switch>\n    //         <Redirect exact from=\"/\" to=\"/home\"></Redirect>\n    //         <Route path=\"/login\" component={Login}></Route>\n    //         <Route path=\"/home\" component={Home}></Route>\n    //       </Switch>\n    //   </div>\n    // </Router>\n  )\n}\n\nexport default App","const initialState = {\n  isLoading: true,\n  info: {},\n  comment: {\n    results: []\n  },\n  isCommentLoading: true\n}\n\nconst article = (state = initialState, action) => {\n  switch (action.type) {\n    case 'article/pengding':\n      return { ...state, isLoading: true }\n    case 'article/success':\n      return { ...state, info: action.payload, isLoading: false }\n    case 'article/set_info':\n      const partialInfo = action.payload\n      return {\n        ...state,\n        info: {\n          ...state.info,\n          ...partialInfo\n        }\n      }\n    case 'article/commeng_loading':\n      return {\n        ...state,\n        isCommentLoading: true\n      }\n    case 'article/comment':\n      return {\n        ...state,\n        isCommentLoading: false,\n        comment: {\n          ...action.payload,\n          results: action.payload.results\n        }\n      }\n    case 'article/comment_more':\n      return {\n        ...state,\n        isCommentLoading: false,\n        comment: {\n          ...action.payload,\n          results: [...state.comment.results, ...action.payload.results]\n        }\n      }\n\n    case 'article/set_comment':\n      const commentPartial = action.payload\n      return {\n        ...state,\n        comment: {\n          ...state.comment,\n          ...commentPartial\n        }\n      }\n    default:\n      return state\n  }\n}\n\nexport { article }\n","const initialState = {\n  userChannel: [],\n  recommendChannel: [],\n  article: {\n    results: [],\n    pre_timestamp: +new Date()\n  },\n  moreAction: {\n    id: 0,\n    visible: false\n  }\n}\n\nconst home = (state = initialState, action) => {\n  switch (action.type) {\n    case 'home/channel':\n      return {\n        ...state,\n        userChannel: action.payload\n      }\n\n    case 'home/recommend':\n      return {\n        ...state,\n        recommendChannel: action.payload\n      }\n\n    case 'home/article':\n      return {\n        ...state,\n        article: action.payload\n      }\n\n    case 'home/more':\n      return {\n        ...state,\n        article: {\n          ...action.payload,\n          results: [...state.article.results, ...action.payload.results]\n        }\n      }\n    case 'home/more_action':\n      return {\n        ...state,\n        moreAction: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport { home }\n","// redux中存储 初始值 token和refresh_token\nconst initialState = {\n  token: '',\n  refresh_token: ''\n}\n\nconst login = (state = initialState, action) => {\n  switch (action.type) {\n    case 'login/token':\n      return { ...action.payload }\n    // case 'login/logout': return { ...action.payload }\n    default:\n      return state\n  }\n}\n\nexport { login }\n","const initialState = {\n  user: {},\n  userProfile: {}\n}\n\nconst profile = (state = initialState, action) => {\n  // const { type, payload } = action \n  switch (action.type) {\n    case 'profile/user':\n      return { ...state, user: { ...action.payload } }\n\n    case 'profile/profile':\n      return { ...state, userProfile: { ...action.payload } }\n\n    case 'profile/update':\n      const { name, value } = action.payload\n      return {\n        ...state,\n        userProfile: {\n          ...state.userProfile,\n          [name]: value\n        }\n      }\n    default:\n      return state\n  }\n}\n\nexport { profile }\n","const initialState = {\n  suggest: [],\n  searchList: []\n}\n\nconst search = (state = initialState, action) => {\n  switch (action.type) {\n    case 'search/suggetion':\n      return {\n        ...state,\n        suggest: action.payload\n      }\n    case 'search/clear':\n      return {\n        ...state,\n        suggest: []\n      }\n    case 'search/list':\n      return {\n        ...state,\n        searchList: action.payload\n      }\n    default:\n      return state\n  }\n}\n\nexport { search }\n","import { combineReducers } from 'redux'\nimport { article } from './article'\nimport { home } from './home'\nimport { login } from './login'\nimport { profile } from './profile'\nimport { search } from './search'\n\nconst rootReducer = combineReducers({\n  login,\n  profile,\n  search,\n  article,\n  home\n})\n\nexport default rootReducer","import { getTokens } from '@/utils'\nimport { applyMiddleware, createStore } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\nimport rootReducer from './reducers'\n\nlet middlewares = applyMiddleware(thunk)\n\n// 需要传入 {}\nconst composeEnhancers = composeWithDevTools({ })\nmiddlewares = composeEnhancers(middlewares)\n\n// 刷新页面时，读取本地缓存中的 tokens\nconst preloadedState = getTokens()\n\n// 可以传入三个参数: 参数1：reducer， 参数2：指定store的初始值， 参数3：指定中间件\nconst store = createStore(\n  rootReducer,\n  {\n    login: preloadedState || {}    //表示 login 模块\n  },\n  middlewares\n)\n\nexport default store\n ","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport App from './App'\nimport './index.css'\nimport store from './store'\n// console.log(store)///--------->  {dispatch: ƒ (action), subscribe: ƒ, getState: ƒ getState(), replaceReducer: ƒ, @@observable: ƒ}\n\n// 主要: 要先搭建redux环境\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}